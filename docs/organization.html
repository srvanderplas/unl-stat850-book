<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 3 Organization: Packages, Functions, Scripts, and Documents | Stat 850: Computing Tools for Statisticians</title>
  <meta name="description" content="Introductions to statistical computing packages and document preparation software. Topics include: graphical techniques, data management, Monte Carlo simulation, dynamic document preparation, presentation software." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 3 Organization: Packages, Functions, Scripts, and Documents | Stat 850: Computing Tools for Statisticians" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://srvanderplas.github.io/unl-stat850/" />
  <meta property="og:image" content="https://srvanderplas.github.io/unl-stat850/images/cover.png" />
  <meta property="og:description" content="Introductions to statistical computing packages and document preparation software. Topics include: graphical techniques, data management, Monte Carlo simulation, dynamic document preparation, presentation software." />
  <meta name="github-repo" content="srvanderplas/unl-stat850" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 3 Organization: Packages, Functions, Scripts, and Documents | Stat 850: Computing Tools for Statisticians" />
  
  <meta name="twitter:description" content="Introductions to statistical computing packages and document preparation software. Topics include: graphical techniques, data management, Monte Carlo simulation, dynamic document preparation, presentation software." />
  <meta name="twitter:image" content="https://srvanderplas.github.io/unl-stat850/images/cover.png" />

<meta name="author" content="Susan Vanderplas" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="intro-prog.html"/>
<link rel="next" href="reading-data.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script>

(function() {
  var codes = document.querySelectorAll('pre:not([class])');
  var code, i, d, s, p;
  for (i = 0; i < codes.length; i++) {
    code = codes[i];
    p = code.parentNode;
    d = document.createElement('details');
    s = document.createElement('summary');
    s.innerText = 'Answers';
    // <details><summary>Answers</summary></details>
      d.appendChild(s);
    // move the code into <details>
      p.replaceChild(d, code);
    d.appendChild(code);
  }
})();
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to Statistical Computing</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#forward"><i class="fa fa-check"></i>Forward</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-description"><i class="fa fa-check"></i>Course Description</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-goals"><i class="fa fa-check"></i>Course Goals</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-objectives"><i class="fa fa-check"></i>Course Objectives</a></li>
</ul></li>
<li class="part"><span><b>I Fundamentals</b></span></li>
<li class="chapter" data-level="1" data-path="tools.html"><a href="tools.html"><i class="fa fa-check"></i><b>1</b> Tools for Statistical Computing</a>
<ul>
<li class="chapter" data-level="" data-path="tools.html"><a href="tools.html#module-1-objectives"><i class="fa fa-check"></i>Tools: Module Objectives</a></li>
<li class="chapter" data-level="1.1" data-path="tools.html"><a href="tools.html#setting-up-software"><i class="fa fa-check"></i><b>1.1</b> Setting Up Software</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="tools.html"><a href="tools.html#sas"><i class="fa fa-check"></i><b>1.1.1</b> SAS</a></li>
<li class="chapter" data-level="1.1.2" data-path="tools.html"><a href="tools.html#r"><i class="fa fa-check"></i><b>1.1.2</b> R</a></li>
<li class="chapter" data-level="1.1.3" data-path="tools.html"><a href="tools.html#rstudio"><i class="fa fa-check"></i><b>1.1.3</b> RStudio</a></li>
<li class="chapter" data-level="1.1.4" data-path="tools.html"><a href="tools.html#git"><i class="fa fa-check"></i><b>1.1.4</b> git</a></li>
<li class="chapter" data-level="1.1.5" data-path="tools.html"><a href="tools.html#latex"><i class="fa fa-check"></i><b>1.1.5</b> LaTeX</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="tools.html"><a href="tools.html#r-and-rstudio"><i class="fa fa-check"></i><b>1.2</b> R and RStudio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="tools.html"><a href="tools.html#getting-set-up-r"><i class="fa fa-check"></i><b>1.2.1</b> Getting Set up: R</a></li>
<li class="chapter" data-level="1.2.2" data-path="tools.html"><a href="tools.html#getting-set-up-rstudio"><i class="fa fa-check"></i><b>1.2.2</b> Getting Set up: RStudio</a></li>
<li class="chapter" data-level="1.2.3" data-path="tools.html"><a href="tools.html#exploring-rstudio"><i class="fa fa-check"></i><b>1.2.3</b> Exploring RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="tools.html"><a href="tools.html#sas-1"><i class="fa fa-check"></i><b>1.3</b> SAS</a>
<ul>
<li class="chapter" data-level="" data-path="tools.html"><a href="tools.html#note"><i class="fa fa-check"></i>Note</a></li>
<li class="chapter" data-level="1.3.1" data-path="tools.html"><a href="tools.html#sas-windowspanes"><i class="fa fa-check"></i><b>1.3.1</b> SAS Windows/Panes</a></li>
<li class="chapter" data-level="1.3.2" data-path="tools.html"><a href="tools.html#sas-modules"><i class="fa fa-check"></i><b>1.3.2</b> SAS Modules</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="tools.html"><a href="tools.html#version-control-with-git"><i class="fa fa-check"></i><b>1.4</b> Version Control with Git</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="tools.html"><a href="tools.html#getting-set-up-github"><i class="fa fa-check"></i><b>1.4.1</b> Getting set up: GitHub</a></li>
<li class="chapter" data-level="1.4.2" data-path="tools.html"><a href="tools.html#getting-set-up-git"><i class="fa fa-check"></i><b>1.4.2</b> Getting set up: git</a></li>
<li class="chapter" data-level="1.4.3" data-path="tools.html"><a href="tools.html#introduce-yourself-to-git"><i class="fa fa-check"></i><b>1.4.3</b> Introduce yourself to git</a></li>
<li class="chapter" data-level="1.4.4" data-path="tools.html"><a href="tools.html#optional-install-a-git-client"><i class="fa fa-check"></i><b>1.4.4</b> Optional: Install a git client</a></li>
<li class="chapter" data-level="1.4.5" data-path="tools.html"><a href="tools.html#git-and-github"><i class="fa fa-check"></i><b>1.4.5</b> Git and Github</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="tools.html"><a href="tools.html#latex-1"><i class="fa fa-check"></i><b>1.5</b> LaTeX</a></li>
<li class="chapter" data-level="1.6" data-path="tools.html"><a href="tools.html#easy-extra-setup-script"><i class="fa fa-check"></i><b>1.6</b> Easy Extra Setup Script</a></li>
<li class="chapter" data-level="1.7" data-path="tools.html"><a href="tools.html#topic-sequencing"><i class="fa fa-check"></i><b>1.7</b> Topic Sequencing</a></li>
<li class="chapter" data-level="1.8" data-path="tools.html"><a href="tools.html#using-version-control"><i class="fa fa-check"></i><b>1.8</b> Using Version Control</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="tools.html"><a href="tools.html#create-a-repository"><i class="fa fa-check"></i><b>1.8.1</b> Create a Repository</a></li>
<li class="chapter" data-level="1.8.2" data-path="tools.html"><a href="tools.html#adding-files"><i class="fa fa-check"></i><b>1.8.2</b> Adding files</a></li>
<li class="chapter" data-level="1.8.3" data-path="tools.html"><a href="tools.html#staging-your-changes"><i class="fa fa-check"></i><b>1.8.3</b> Staging your changes</a></li>
<li class="chapter" data-level="1.8.4" data-path="tools.html"><a href="tools.html#committing-your-changes"><i class="fa fa-check"></i><b>1.8.4</b> Committing your changes</a></li>
<li class="chapter" data-level="1.8.5" data-path="tools.html"><a href="tools.html#pushing-and-pulling"><i class="fa fa-check"></i><b>1.8.5</b> Pushing and Pulling</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="tools.html"><a href="tools.html#references"><i class="fa fa-check"></i><b>1.9</b> References</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-prog.html"><a href="intro-prog.html"><i class="fa fa-check"></i><b>2</b> Introduction to Statistical Programming</a>
<ul>
<li class="chapter" data-level="" data-path="intro-prog.html"><a href="intro-prog.html#a-quick-note-on-rmarkdown"><i class="fa fa-check"></i>A quick note on Rmarkdown</a></li>
<li class="chapter" data-level="" data-path="intro-prog.html"><a href="intro-prog.html#module-2-objectives"><i class="fa fa-check"></i>Intro to Programming: Module Objectives</a></li>
<li class="chapter" data-level="" data-path="intro-prog.html"><a href="intro-prog.html#definitions"><i class="fa fa-check"></i>Definitions</a></li>
<li class="chapter" data-level="" data-path="intro-prog.html"><a href="intro-prog.html#statistical-programming-languages"><i class="fa fa-check"></i>Statistical Programming Languages</a></li>
<li class="chapter" data-level="2.1" data-path="intro-prog.html"><a href="intro-prog.html#variable-types"><i class="fa fa-check"></i><b>2.1</b> Variable types</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intro-prog.html"><a href="intro-prog.html#r-1"><i class="fa fa-check"></i><b>2.1.1</b> R</a></li>
<li class="chapter" data-level="2.1.2" data-path="intro-prog.html"><a href="intro-prog.html#sas-2"><i class="fa fa-check"></i><b>2.1.2</b> SAS</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intro-prog.html"><a href="intro-prog.html#data-structures"><i class="fa fa-check"></i><b>2.2</b> Data structures</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="intro-prog.html"><a href="intro-prog.html#homogeneous-data-structures-r-and-sas"><i class="fa fa-check"></i><b>2.2.1</b> Homogeneous data structures (R and SAS)</a></li>
<li class="chapter" data-level="2.2.2" data-path="intro-prog.html"><a href="intro-prog.html#heterogeneous-data-structures"><i class="fa fa-check"></i><b>2.2.2</b> Heterogeneous data structures</a></li>
<li class="chapter" data-level="2.2.3" data-path="intro-prog.html"><a href="intro-prog.html#indexing"><i class="fa fa-check"></i><b>2.2.3</b> Indexing</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intro-prog.html"><a href="intro-prog.html#control-structures"><i class="fa fa-check"></i><b>2.3</b> Control structures</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="intro-prog.html"><a href="intro-prog.html#if-statements"><i class="fa fa-check"></i><b>2.3.1</b> If statements</a></li>
<li class="chapter" data-level="2.3.2" data-path="intro-prog.html"><a href="intro-prog.html#loops"><i class="fa fa-check"></i><b>2.3.2</b> Loops</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intro-prog.html"><a href="intro-prog.html#overgrown-calculators"><i class="fa fa-check"></i><b>2.4</b> Overgrown Calculators</a></li>
<li class="chapter" data-level="" data-path="intro-prog.html"><a href="intro-prog.html#references-and-links"><i class="fa fa-check"></i>References and Links</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro-prog.html"><a href="intro-prog.html#cheat-sheets-and-reference-cards"><i class="fa fa-check"></i><b>2.4.1</b> Cheat Sheets and Reference Cards</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro-prog.html"><a href="intro-prog.html#sas-as-taught-in-other-places"><i class="fa fa-check"></i><b>2.4.2</b> SAS (as taught in other places)</a></li>
<li class="chapter" data-level="2.4.3" data-path="intro-prog.html"><a href="intro-prog.html#r-courses-as-taught-elsewhere-and-textbooks"><i class="fa fa-check"></i><b>2.4.3</b> R courses (as taught elsewhere) and Textbooks</a></li>
<li class="chapter" data-level="2.4.4" data-path="intro-prog.html"><a href="intro-prog.html#combination-of-r-and-sas-courses"><i class="fa fa-check"></i><b>2.4.4</b> Combination of R and SAS courses</a></li>
<li class="chapter" data-level="2.4.5" data-path="intro-prog.html"><a href="intro-prog.html#non-exhaustive-list-of-sources-used-to-aggregate-core-programming-concepts"><i class="fa fa-check"></i><b>2.4.5</b> Non-Exhaustive List of Sources used to aggregate “core programming concepts”:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="organization.html"><a href="organization.html"><i class="fa fa-check"></i><b>3</b> Organization: Packages, Functions, Scripts, and Documents</a>
<ul>
<li class="chapter" data-level="" data-path="organization.html"><a href="organization.html#module-3-objectives"><i class="fa fa-check"></i>Organization: Module Objectives</a></li>
<li class="chapter" data-level="3.1" data-path="organization.html"><a href="organization.html#reproducibility"><i class="fa fa-check"></i><b>3.1</b> Reproducibility</a>
<ul>
<li class="chapter" data-level="" data-path="organization.html"><a href="organization.html#reproducibility-references-and-reading"><i class="fa fa-check"></i>Reproducibility References and Reading</a></li>
<li class="chapter" data-level="3.1.1" data-path="organization.html"><a href="organization.html#rmarkdown"><i class="fa fa-check"></i><b>3.1.1</b> Markdown and R</a></li>
<li class="chapter" data-level="3.1.2" data-path="organization.html"><a href="organization.html#rmarkdown-with-sas"><i class="fa fa-check"></i><b>3.1.2</b> Rmarkdown with… SAS?</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="organization.html"><a href="organization.html#functions-and-modules"><i class="fa fa-check"></i><b>3.2</b> Functions and Modules</a>
<ul>
<li class="chapter" data-level="" data-path="organization.html"><a href="organization.html#try-it-out-7"><i class="fa fa-check"></i>Try it out</a></li>
<li class="chapter" data-level="3.2.1" data-path="organization.html"><a href="organization.html#scope"><i class="fa fa-check"></i><b>3.2.1</b> Scope</a></li>
<li class="chapter" data-level="3.2.2" data-path="organization.html"><a href="organization.html#the-pipe"><i class="fa fa-check"></i><b>3.2.2</b> The Pipe</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="organization.html"><a href="organization.html#procs-and-data-steps"><i class="fa fa-check"></i><b>3.3</b> Procs and Data steps</a>
<ul>
<li class="chapter" data-level="" data-path="organization.html"><a href="organization.html#try-it-out-9"><i class="fa fa-check"></i>Try It Out</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="organization.html"><a href="organization.html#scripts"><i class="fa fa-check"></i><b>3.4</b> Scripts</a>
<ul>
<li class="chapter" data-level="" data-path="organization.html"><a href="organization.html#try-it-out-10"><i class="fa fa-check"></i>Try it out</a></li>
<li class="chapter" data-level="" data-path="organization.html"><a href="organization.html#try-it-out-sas"><i class="fa fa-check"></i>Try it out (SAS)</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="organization.html"><a href="organization.html#packages"><i class="fa fa-check"></i><b>3.5</b> Packages</a>
<ul>
<li class="chapter" data-level="" data-path="organization.html"><a href="organization.html#try-it-out-11"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="organization.html"><a href="organization.html#references-and-links-1"><i class="fa fa-check"></i>References and Links</a></li>
</ul></li>
<li class="part"><span><b>II Data Programming</b></span></li>
<li class="chapter" data-level="4" data-path="reading-data.html"><a href="reading-data.html"><i class="fa fa-check"></i><b>4</b> External Data</a>
<ul>
<li class="chapter" data-level="" data-path="reading-data.html"><a href="reading-data.html#reading-data-module-objectives"><i class="fa fa-check"></i>Reading Data: Module Objectives</a></li>
<li class="chapter" data-level="4.1" data-path="reading-data.html"><a href="reading-data.html#external-data-formats"><i class="fa fa-check"></i><b>4.1</b> External Data Formats</a></li>
<li class="chapter" data-level="4.2" data-path="reading-data.html"><a href="reading-data.html#text-files"><i class="fa fa-check"></i><b>4.2</b> Text Files</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="reading-data.html"><a href="reading-data.html#fixed-width-files"><i class="fa fa-check"></i><b>4.2.1</b> Fixed-width files</a></li>
<li class="chapter" data-level="4.2.2" data-path="reading-data.html"><a href="reading-data.html#delimited-text-files"><i class="fa fa-check"></i><b>4.2.2</b> Delimited Text Files</a></li>
<li class="chapter" data-level="" data-path="reading-data.html"><a href="reading-data.html#try-it-out-12"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="reading-data.html"><a href="reading-data.html#spreadsheets"><i class="fa fa-check"></i><b>4.3</b> Spreadsheets</a>
<ul>
<li class="chapter" data-level="" data-path="reading-data.html"><a href="reading-data.html#try-it-out-13"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="reading-data.html"><a href="reading-data.html#binary-files"><i class="fa fa-check"></i><b>4.4</b> Binary Files</a>
<ul>
<li class="chapter" data-level="" data-path="reading-data.html"><a href="reading-data.html#try-it-out-14"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="reading-data.html"><a href="reading-data.html#databases"><i class="fa fa-check"></i><b>4.5</b> Databases</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="reading-data.html"><a href="reading-data.html#microsoft-access"><i class="fa fa-check"></i><b>4.5.1</b> Microsoft Access</a></li>
<li class="chapter" data-level="4.5.2" data-path="reading-data.html"><a href="reading-data.html#sqlite"><i class="fa fa-check"></i><b>4.5.2</b> SQLite</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="reading-data.html"><a href="reading-data.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>4.6</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="reading-data.html"><a href="reading-data.html#sas-3"><i class="fa fa-check"></i><b>4.6.1</b> SAS</a></li>
<li class="chapter" data-level="4.6.2" data-path="reading-data.html"><a href="reading-data.html#r-2"><i class="fa fa-check"></i><b>4.6.2</b> R</a></li>
<li class="chapter" data-level="4.6.3" data-path="reading-data.html"><a href="reading-data.html#comparison"><i class="fa fa-check"></i><b>4.6.3</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="reading-data.html"><a href="reading-data.html#references-and-links-2"><i class="fa fa-check"></i>References and Links</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="manipulating-data.html"><a href="manipulating-data.html"><i class="fa fa-check"></i><b>5</b> Manipulating Data</a>
<ul>
<li class="chapter" data-level="" data-path="manipulating-data.html"><a href="manipulating-data.html#manipulating-data-module-objectives"><i class="fa fa-check"></i>Manipulating Data: Module Objectives</a></li>
<li class="chapter" data-level="5.1" data-path="manipulating-data.html"><a href="manipulating-data.html#tidy-data"><i class="fa fa-check"></i><b>5.1</b> Tidy Data</a></li>
<li class="chapter" data-level="5.2" data-path="manipulating-data.html"><a href="manipulating-data.html#filter-pick-cases-rows-based-on-their-values"><i class="fa fa-check"></i><b>5.2</b> Filter: Pick cases (rows) based on their values</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="manipulating-data.html"><a href="manipulating-data.html#common-filter-tasks"><i class="fa fa-check"></i><b>5.2.1</b> Common Filter() Tasks</a></li>
<li class="chapter" data-level="" data-path="manipulating-data.html"><a href="manipulating-data.html#try-it-out-15"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="manipulating-data.html"><a href="manipulating-data.html#select-pick-columns"><i class="fa fa-check"></i><b>5.3</b> Select: Pick columns</a></li>
<li class="chapter" data-level="5.4" data-path="manipulating-data.html"><a href="manipulating-data.html#mutate-add-and-transform-variables"><i class="fa fa-check"></i><b>5.4</b> Mutate: Add and transform variables</a></li>
<li class="chapter" data-level="5.5" data-path="manipulating-data.html"><a href="manipulating-data.html#summarize"><i class="fa fa-check"></i><b>5.5</b> Summarize</a></li>
<li class="chapter" data-level="5.6" data-path="manipulating-data.html"><a href="manipulating-data.html#group-by-power"><i class="fa fa-check"></i><b>5.6</b> Group By + (?) = Power!</a></li>
<li class="chapter" data-level="5.7" data-path="manipulating-data.html"><a href="manipulating-data.html#other-dplyr-functions-across-relocate"><i class="fa fa-check"></i><b>5.7</b> Other <code>dplyr</code> functions: across, relocate</a></li>
<li class="chapter" data-level="" data-path="manipulating-data.html"><a href="manipulating-data.html#try-it-out-16"><i class="fa fa-check"></i>Try it out</a></li>
<li class="chapter" data-level="" data-path="manipulating-data.html"><a href="manipulating-data.html#references-1"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="transforming-data.html"><a href="transforming-data.html"><i class="fa fa-check"></i><b>6</b> Transforming Data</a>
<ul>
<li class="chapter" data-level="" data-path="transforming-data.html"><a href="transforming-data.html#transforming-data-module-objectives"><i class="fa fa-check"></i>Transforming Data: Module Objectives</a></li>
<li class="chapter" data-level="6.1" data-path="transforming-data.html"><a href="transforming-data.html#identifying-the-problem-messy-data"><i class="fa fa-check"></i><b>6.1</b> Identifying the problem: Messy data</a>
<ul>
<li class="chapter" data-level="" data-path="transforming-data.html"><a href="transforming-data.html#try-it-out-17"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="transforming-data.html"><a href="transforming-data.html#string-operations-creating-new-variables-and-separating-multi-variable-columns"><i class="fa fa-check"></i><b>6.2</b> String operations: Creating new variables and separating multi-variable columns</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="transforming-data.html"><a href="transforming-data.html#basic-string-operations"><i class="fa fa-check"></i><b>6.2.1</b> Basic String Operations</a></li>
<li class="chapter" data-level="6.2.2" data-path="transforming-data.html"><a href="transforming-data.html#regular-expressions"><i class="fa fa-check"></i><b>6.2.2</b> Regular Expressions</a></li>
<li class="chapter" data-level="6.2.3" data-path="transforming-data.html"><a href="transforming-data.html#joining-and-splitting-variables"><i class="fa fa-check"></i><b>6.2.3</b> Joining and Splitting Variables</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="transforming-data.html"><a href="transforming-data.html#pivot-operations"><i class="fa fa-check"></i><b>6.3</b> Pivot operations</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="transforming-data.html"><a href="transforming-data.html#longer"><i class="fa fa-check"></i><b>6.3.1</b> Longer</a></li>
<li class="chapter" data-level="6.3.2" data-path="transforming-data.html"><a href="transforming-data.html#wider"><i class="fa fa-check"></i><b>6.3.2</b> Wider</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="transforming-data.html"><a href="transforming-data.html#relational-data-and-joining-tables"><i class="fa fa-check"></i><b>6.4</b> Relational Data and Joining Tables</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="transforming-data.html"><a href="transforming-data.html#demonstration-dataset-setup"><i class="fa fa-check"></i><b>6.4.1</b> Demonstration dataset setup</a></li>
<li class="chapter" data-level="6.4.2" data-path="transforming-data.html"><a href="transforming-data.html#mutating-joins"><i class="fa fa-check"></i><b>6.4.2</b> Mutating joins</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="transforming-data.html"><a href="transforming-data.html#example-gas-prices-data"><i class="fa fa-check"></i><b>6.5</b> Example: Gas Prices Data</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="transforming-data.html"><a href="transforming-data.html#option-1-manual-formatting-in-excel"><i class="fa fa-check"></i><b>6.5.1</b> Option 1: Manual formatting in Excel</a></li>
<li class="chapter" data-level="6.5.2" data-path="transforming-data.html"><a href="transforming-data.html#option-2-r"><i class="fa fa-check"></i><b>6.5.2</b> Option 2: R</a></li>
<li class="chapter" data-level="6.5.3" data-path="transforming-data.html"><a href="transforming-data.html#option-3-sas"><i class="fa fa-check"></i><b>6.5.3</b> Option 3: SAS</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="transforming-data.html"><a href="transforming-data.html#references-2"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>7</b> Principles of Debugging</a>
<ul>
<li class="chapter" data-level="" data-path="debugging.html"><a href="debugging.html#debugging-module-objectives"><i class="fa fa-check"></i>Debugging: Module Objectives</a></li>
<li class="chapter" data-level="7.1" data-path="debugging.html"><a href="debugging.html#step-1-check-your-spelling."><i class="fa fa-check"></i><b>7.1</b> Step 1: Check your spelling.</a></li>
<li class="chapter" data-level="7.2" data-path="debugging.html"><a href="debugging.html#defensive-programming"><i class="fa fa-check"></i><b>7.2</b> Defensive Programming</a></li>
<li class="chapter" data-level="7.3" data-path="debugging.html"><a href="debugging.html#general-debugging-strategies"><i class="fa fa-check"></i><b>7.3</b> General Debugging Strategies</a></li>
<li class="chapter" data-level="7.4" data-path="debugging.html"><a href="debugging.html#debugging-tools-in-r"><i class="fa fa-check"></i><b>7.4</b> Debugging Tools in R</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="debugging.html"><a href="debugging.html#low-tech-debugging-with-print-and-other-tools"><i class="fa fa-check"></i><b>7.4.1</b> Low tech debugging with print() and other tools</a></li>
<li class="chapter" data-level="7.4.2" data-path="debugging.html"><a href="debugging.html#after-an-error-has-occurred---traceback"><i class="fa fa-check"></i><b>7.4.2</b> After an error has occurred - <code>traceback()</code></a></li>
<li class="chapter" data-level="7.4.3" data-path="debugging.html"><a href="debugging.html#browser---debugging-your-own-code-interactively"><i class="fa fa-check"></i><b>7.4.3</b> <code>browser()</code> - debugging your own code, interactively</a></li>
<li class="chapter" data-level="7.4.4" data-path="debugging.html"><a href="debugging.html#debug---the-general-debugging-workhorse"><i class="fa fa-check"></i><b>7.4.4</b> <code>debug()</code> - the general debugging workhorse</a></li>
<li class="chapter" data-level="" data-path="debugging.html"><a href="debugging.html#try-it-out-23"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="debugging.html"><a href="debugging.html#debugging-tools-in-sas"><i class="fa fa-check"></i><b>7.5</b> Debugging Tools in SAS</a></li>
<li class="chapter" data-level="7.6" data-path="debugging.html"><a href="debugging.html#minimal-working-examples"><i class="fa fa-check"></i><b>7.6</b> Minimal Working Examples</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="debugging.html"><a href="debugging.html#example-mwes"><i class="fa fa-check"></i><b>7.6.1</b> Example: MWEs</a></li>
<li class="chapter" data-level="7.6.2" data-path="debugging.html"><a href="debugging.html#try-it-out-24"><i class="fa fa-check"></i><b>7.6.2</b> Try It Out</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="debugging.html"><a href="debugging.html#references-3"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="part"><span><b>III Applications</b></span></li>
<li class="chapter" data-level="8" data-path="data-vis-intro.html"><a href="data-vis-intro.html"><i class="fa fa-check"></i><b>8</b> Introduction to Data Visualization</a>
<ul>
<li class="chapter" data-level="" data-path="data-vis-intro.html"><a href="data-vis-intro.html#visualization-module-objectives"><i class="fa fa-check"></i>Visualization: Module Objectives</a></li>
<li class="chapter" data-level="8.1" data-path="data-vis-intro.html"><a href="data-vis-intro.html#why-do-we-create-graphics"><i class="fa fa-check"></i><b>8.1</b> Why do we create graphics?</a></li>
<li class="chapter" data-level="8.2" data-path="data-vis-intro.html"><a href="data-vis-intro.html#general-approaches-to-creating-graphics"><i class="fa fa-check"></i><b>8.2</b> General approaches to creating graphics</a></li>
<li class="chapter" data-level="8.3" data-path="data-vis-intro.html"><a href="data-vis-intro.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>8.3</b> The Grammar of Graphics</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="data-vis-intro.html"><a href="data-vis-intro.html#demonstration-aesthetic-mappings-and-basic-plots"><i class="fa fa-check"></i><b>8.3.1</b> Demonstration: Aesthetic Mappings and Basic Plots</a></li>
<li class="chapter" data-level="8.3.2" data-path="data-vis-intro.html"><a href="data-vis-intro.html#syntax-and-general-structure-layers"><i class="fa fa-check"></i><b>8.3.2</b> Syntax and General Structure: Layers</a></li>
<li class="chapter" data-level="8.3.3" data-path="data-vis-intro.html"><a href="data-vis-intro.html#statistics-and-different-types-of-plots"><i class="fa fa-check"></i><b>8.3.3</b> Statistics and Different Types of Plots</a></li>
<li class="chapter" data-level="8.3.4" data-path="data-vis-intro.html"><a href="data-vis-intro.html#small-multiples"><i class="fa fa-check"></i><b>8.3.4</b> Small Multiples</a></li>
<li class="chapter" data-level="" data-path="data-vis-intro.html"><a href="data-vis-intro.html#try-it-out-28"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="data-vis-intro.html"><a href="data-vis-intro.html#good-charts"><i class="fa fa-check"></i><b>8.4</b> Good charts</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="data-vis-intro.html"><a href="data-vis-intro.html#perceptual-and-cognitive-factors"><i class="fa fa-check"></i><b>8.4.1</b> Perceptual and Cognitive Factors</a></li>
<li class="chapter" data-level="8.4.2" data-path="data-vis-intro.html"><a href="data-vis-intro.html#general-guidelines-for-accuracy"><i class="fa fa-check"></i><b>8.4.2</b> General guidelines for accuracy</a></li>
<li class="chapter" data-level="8.4.3" data-path="data-vis-intro.html"><a href="data-vis-intro.html#how-do-we-know"><i class="fa fa-check"></i><b>8.4.3</b> How do we know?</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="data-vis-intro.html"><a href="data-vis-intro.html#other-things-worth-exploring-and-future-expansions-for-this-chapter"><i class="fa fa-check"></i><b>8.5</b> Other things worth exploring (and future expansions for this chapter)</a></li>
<li class="chapter" data-level="" data-path="data-vis-intro.html"><a href="data-vis-intro.html#references-4"><i class="fa fa-check"></i>References</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="data-vis-intro.html"><a href="data-vis-intro.html#motivation"><i class="fa fa-check"></i><b>8.5.1</b> Motivation</a></li>
<li class="chapter" data-level="8.5.2" data-path="data-vis-intro.html"><a href="data-vis-intro.html#r-graphics"><i class="fa fa-check"></i><b>8.5.2</b> R graphics</a></li>
<li class="chapter" data-level="8.5.3" data-path="data-vis-intro.html"><a href="data-vis-intro.html#sas-graphics"><i class="fa fa-check"></i><b>8.5.3</b> SAS graphics</a></li>
<li class="chapter" data-level="8.5.4" data-path="data-vis-intro.html"><a href="data-vis-intro.html#types-of-charts-and-chart-styling"><i class="fa fa-check"></i><b>8.5.4</b> Types of Charts and Chart Styling</a></li>
<li class="chapter" data-level="8.5.5" data-path="data-vis-intro.html"><a href="data-vis-intro.html#other-graphics-packages"><i class="fa fa-check"></i><b>8.5.5</b> Other Graphics packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="simulation.html"><a href="simulation.html"><i class="fa fa-check"></i><b>9</b> Simulation and Reproducibility</a>
<ul>
<li class="chapter" data-level="" data-path="simulation.html"><a href="simulation.html#simulation-module-objectives"><i class="fa fa-check"></i>Simulation: Module Objectives</a></li>
<li class="chapter" data-level="9.1" data-path="simulation.html"><a href="simulation.html#pseudorandom-number-generation"><i class="fa fa-check"></i><b>9.1</b> Pseudorandom Number Generation</a></li>
<li class="chapter" data-level="9.2" data-path="simulation.html"><a href="simulation.html#built-in-simulations-from-distributions"><i class="fa fa-check"></i><b>9.2</b> Built-in simulations from distributions</a>
<ul>
<li class="chapter" data-level="" data-path="simulation.html"><a href="simulation.html#try-it-out-30"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="simulation.html"><a href="simulation.html#simulation-to-test-model-assumptions"><i class="fa fa-check"></i><b>9.3</b> Simulation to test model assumptions</a>
<ul>
<li class="chapter" data-level="" data-path="simulation.html"><a href="simulation.html#try-it-out-31"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="simulation.html"><a href="simulation.html#monte-carlo-methods"><i class="fa fa-check"></i><b>9.4</b> Monte Carlo methods</a>
<ul>
<li class="chapter" data-level="" data-path="simulation.html"><a href="simulation.html#try-it-out-32"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="simulation.html"><a href="simulation.html#references-5"><i class="fa fa-check"></i><b>9.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="docs-reports.html"><a href="docs-reports.html"><i class="fa fa-check"></i><b>10</b> Documents and Reports</a>
<ul>
<li class="chapter" data-level="" data-path="docs-reports.html"><a href="docs-reports.html#documents-and-reports-module-objectives"><i class="fa fa-check"></i>Documents and Reports: Module Objectives</a></li>
<li class="chapter" data-level="10.1" data-path="docs-reports.html"><a href="docs-reports.html#literate-programming-knitr-and-rmarkdown"><i class="fa fa-check"></i><b>10.1</b> Literate Programming, <code>knitr</code>, and <code>rmarkdown</code></a></li>
<li class="chapter" data-level="10.2" data-path="docs-reports.html"><a href="docs-reports.html#a-very-brief-introduction-to-latex"><i class="fa fa-check"></i><b>10.2</b> A Very Brief Introduction to LaTeX</a>
<ul>
<li class="chapter" data-level="" data-path="docs-reports.html"><a href="docs-reports.html#try-it-out-33"><i class="fa fa-check"></i>Try it out</a></li>
<li class="chapter" data-level="10.2.1" data-path="docs-reports.html"><a href="docs-reports.html#knitr"><i class="fa fa-check"></i><b>10.2.1</b> Knitr</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="docs-reports.html"><a href="docs-reports.html#slides"><i class="fa fa-check"></i><b>10.3</b> Slides</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="docs-reports.html"><a href="docs-reports.html#beamer-latex-and-knitr"><i class="fa fa-check"></i><b>10.3.1</b> Beamer (LaTeX) and knitr</a></li>
<li class="chapter" data-level="10.3.2" data-path="docs-reports.html"><a href="docs-reports.html#html-slides"><i class="fa fa-check"></i><b>10.3.2</b> HTML slides</a></li>
<li class="chapter" data-level="" data-path="docs-reports.html"><a href="docs-reports.html#try-it-out-35"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="docs-reports.html"><a href="docs-reports.html#posters"><i class="fa fa-check"></i><b>10.4</b> Posters</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="docs-reports.html"><a href="docs-reports.html#latex-2"><i class="fa fa-check"></i><b>10.4.1</b> LaTeX</a></li>
<li class="chapter" data-level="10.4.2" data-path="docs-reports.html"><a href="docs-reports.html#posterdown"><i class="fa fa-check"></i><b>10.4.2</b> Posterdown</a></li>
<li class="chapter" data-level="10.4.3" data-path="docs-reports.html"><a href="docs-reports.html#pagedown"><i class="fa fa-check"></i><b>10.4.3</b> Pagedown</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="docs-reports.html"><a href="docs-reports.html#resumecv"><i class="fa fa-check"></i><b>10.5</b> Resume/CV</a></li>
<li class="chapter" data-level="10.6" data-path="docs-reports.html"><a href="docs-reports.html#using-github-pages"><i class="fa fa-check"></i><b>10.6</b> Using Github Pages</a></li>
<li class="chapter" data-level="10.7" data-path="docs-reports.html"><a href="docs-reports.html#references-6"><i class="fa fa-check"></i><b>10.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="animated-and-interactive-graphics.html"><a href="animated-and-interactive-graphics.html"><i class="fa fa-check"></i><b>11</b> Animated and Interactive Graphics</a>
<ul>
<li class="chapter" data-level="" data-path="animated-and-interactive-graphics.html"><a href="animated-and-interactive-graphics.html#animated-and-interactive-graphics-module-objectives"><i class="fa fa-check"></i>Animated and Interactive Graphics: Module Objectives</a></li>
<li class="chapter" data-level="11.1" data-path="animated-and-interactive-graphics.html"><a href="animated-and-interactive-graphics.html#plotly"><i class="fa fa-check"></i><b>11.1</b> Plotly</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="animated-and-interactive-graphics.html"><a href="animated-and-interactive-graphics.html#ggplotly-ggplot2-to-plotly-conversions"><i class="fa fa-check"></i><b>11.1.1</b> <code>ggplotly</code>: ggplot2 to plotly conversions</a></li>
<li class="chapter" data-level="11.1.2" data-path="animated-and-interactive-graphics.html"><a href="animated-and-interactive-graphics.html#plot_ly-like-base-plotting-but-interactive"><i class="fa fa-check"></i><b>11.1.2</b> <code>plot_ly</code>: Like base plotting, but interactive!</a></li>
<li class="chapter" data-level="11.1.3" data-path="animated-and-interactive-graphics.html"><a href="animated-and-interactive-graphics.html#animation"><i class="fa fa-check"></i><b>11.1.3</b> Animation</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="animated-and-interactive-graphics.html"><a href="animated-and-interactive-graphics.html#leaflet-maps"><i class="fa fa-check"></i><b>11.2</b> Leaflet maps</a>
<ul>
<li class="chapter" data-level="" data-path="animated-and-interactive-graphics.html"><a href="animated-and-interactive-graphics.html#try-it-out-39"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="animated-and-interactive-graphics.html"><a href="animated-and-interactive-graphics.html#shiny"><i class="fa fa-check"></i><b>11.3</b> Shiny</a></li>
<li class="chapter" data-level="11.4" data-path="animated-and-interactive-graphics.html"><a href="animated-and-interactive-graphics.html#general-references"><i class="fa fa-check"></i><b>11.4</b> General References</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="animated-and-interactive-graphics.html"><a href="animated-and-interactive-graphics.html#other-interactive-tools"><i class="fa fa-check"></i><b>11.4.1</b> Other interactive tools</a></li>
<li class="chapter" data-level="11.4.2" data-path="animated-and-interactive-graphics.html"><a href="animated-and-interactive-graphics.html#debugging-1"><i class="fa fa-check"></i><b>11.4.2</b> Debugging</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="lists-nested-lists-and-functional-programming.html"><a href="lists-nested-lists-and-functional-programming.html"><i class="fa fa-check"></i><b>12</b> Lists, Nested Lists, and Functional Programming</a>
<ul>
<li class="chapter" data-level="12.1" data-path="lists-nested-lists-and-functional-programming.html"><a href="lists-nested-lists-and-functional-programming.html#review-lists-and-vectors"><i class="fa fa-check"></i><b>12.1</b> Review: Lists and Vectors</a></li>
<li class="chapter" data-level="12.2" data-path="lists-nested-lists-and-functional-programming.html"><a href="lists-nested-lists-and-functional-programming.html#introduction-to-map"><i class="fa fa-check"></i><b>12.2</b> Introduction to <code>map</code></a></li>
<li class="chapter" data-level="12.3" data-path="lists-nested-lists-and-functional-programming.html"><a href="lists-nested-lists-and-functional-programming.html#creating-and-using-list-columns"><i class="fa fa-check"></i><b>12.3</b> Creating (and Using) List-columns</a></li>
<li class="chapter" data-level="12.4" data-path="lists-nested-lists-and-functional-programming.html"><a href="lists-nested-lists-and-functional-programming.html#ways-to-use-map"><i class="fa fa-check"></i><b>12.4</b> Ways to use <code>map</code></a>
<ul>
<li class="chapter" data-level="" data-path="lists-nested-lists-and-functional-programming.html"><a href="lists-nested-lists-and-functional-programming.html#try-it-out-40"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="lists-nested-lists-and-functional-programming.html"><a href="lists-nested-lists-and-functional-programming.html#beyond-map-functions-with-multiple-inputs"><i class="fa fa-check"></i><b>12.5</b> Beyond <code>map</code>: Functions with multiple inputs</a>
<ul>
<li class="chapter" data-level="" data-path="lists-nested-lists-and-functional-programming.html"><a href="lists-nested-lists-and-functional-programming.html#try-it-out-41"><i class="fa fa-check"></i>Try it out</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists-nested-lists-and-functional-programming.html"><a href="lists-nested-lists-and-functional-programming.html#purrr-references"><i class="fa fa-check"></i>Purrr References</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="high-performance-computing.html"><a href="high-performance-computing.html"><i class="fa fa-check"></i><b>13</b> High Performance Computing</a>
<ul>
<li class="chapter" data-level="" data-path="high-performance-computing.html"><a href="high-performance-computing.html#hpc-references"><i class="fa fa-check"></i>HPC References</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="tidy-models.html"><a href="tidy-models.html"><i class="fa fa-check"></i><b>14</b> Tidy Models</a></li>
<li class="chapter" data-level="15" data-path="spatial-packages.html"><a href="spatial-packages.html"><i class="fa fa-check"></i><b>15</b> Spatial packages</a>
<ul>
<li class="chapter" data-level="" data-path="spatial-packages.html"><a href="spatial-packages.html#references-7"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="common-problems-and-general-computing-topics.html"><a href="common-problems-and-general-computing-topics.html"><i class="fa fa-check"></i><b>A</b> Common Problems and General Computing Topics</a>
<ul>
<li class="chapter" data-level="A.1" data-path="common-problems-and-general-computing-topics.html"><a href="common-problems-and-general-computing-topics.html#file-paths-working-directories-and-reproducibility"><i class="fa fa-check"></i><b>A.1</b> File Paths, Working Directories, and Reproducibility</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="common-problems-and-general-computing-topics.html"><a href="common-problems-and-general-computing-topics.html#file-paths"><i class="fa fa-check"></i><b>A.1.1</b> File paths</a></li>
<li class="chapter" data-level="A.1.2" data-path="common-problems-and-general-computing-topics.html"><a href="common-problems-and-general-computing-topics.html#working-directory"><i class="fa fa-check"></i><b>A.1.2</b> Working Directory</a></li>
<li class="chapter" data-level="A.1.3" data-path="common-problems-and-general-computing-topics.html"><a href="common-problems-and-general-computing-topics.html#reproducibility-1"><i class="fa fa-check"></i><b>A.1.3</b> Reproducibility</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="other-resources-articles-and-food-for-thought.html"><a href="other-resources-articles-and-food-for-thought.html"><i class="fa fa-check"></i><b>B</b> Other Resources, Articles, and Food for Thought</a>
<ul>
<li class="chapter" data-level="B.1" data-path="other-resources-articles-and-food-for-thought.html"><a href="other-resources-articles-and-food-for-thought.html#comparing-languages"><i class="fa fa-check"></i><b>B.1</b> Comparing Languages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-8.html"><a href="references-8.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Stat 850: Computing Tools for Statisticians</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="organization" class="section level1" number="3">
<h1><span class="header-section-number">Module 3</span> Organization: Packages, Functions, Scripts, and Documents</h1>
<div id="module-3-objectives" class="section level2 unnumbered">
<h2>Organization: Module Objectives</h2>
<ul>
<li>Use markdown to create dynamic documents which show code and results reproducibly</li>
<li>Create functions and scripts to accomplish simple tasks</li>
<li>Compare the structure and syntax of R and SAS programs</li>
<li>Know where to find external software packages or modules to provide additional functionality</li>
</ul>
</div>
<div id="reproducibility" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Reproducibility</h2>
<!-- Why reproducibility is important in science and statistics -->
<p>The concepts of <strong>replication</strong> and <strong>reproducibility</strong> is central to science - we do not trust studies whose results cannot be replicated by additional repetitions of the experiment, and we do not trust statistical analyses whose results are not backed up by valid methods that can be re-run to verify the reported results. While replication covers the lab methods, experimental design, and data collection procedures, reproducibility is concerned with the code and the data from an experiment which has already been run. Specifically, the idea is that the research paper is basically an advertisement - by exposing the code and data used in the analysis, readers can engage with the core of the analysis methods, leading to better peer feedback as well as easier adoption of the research for future work.</p>
<p>Reproducibility has several advantages:</p>
<ol style="list-style-type: decimal">
<li><p>It allows you to show the correctness of your results<br />
Trying to reproduce an analysis from the data and the description in the journal article is… challenging, if not impossible, in many cases. By providing the raw data and code to take the data from raw form to analysis results, readers can verify the legitimacy of each step in the analysis. This allows researchers to review each others methods, finding mistakes due to <a href="https://www.sciencemag.org/news/2016/08/one-five-genetics-papers-contains-errors-thanks-microsoft-excel">bugs in the software used</a> or due to implementation errors. In one particularly prominent failure of reproducibility, a study used to support macroeconomic theories that shaped the response to the 2008-2009 recession <a href="https://theconversation.com/the-reinhart-rogoff-error-or-how-not-to-excel-at-economics-13646">negatively correlating national debt with gdp growth</a> was found to be flawed due to an excel indexing mistake. Use of GUI-based (graphical user interface) statistical analysis software may make it harder to identify these mistakes, because the formulas and code are not visually displayed.</p></li>
<li><p>It allows others to use your results more easily<br />
By sharing your code and raw data, you provide the wider scientific community with the ability to use your results to build new scientific studies. This increases the relevance of your work, the number of citations your papers get, and you also benefit from the community adopting a culture of openness and reproducibility.</p></li>
<li><p>In 2 years, when you need to find the code you used for that analysis in XXX paper, you’ll be able to find the code (and the data) to see how it worked and what you did. The code may or may not run as-is (depending on software versioning, package updates, etc.), but you will have the methods clearly documented along with the data (so it’s easy to replicate the data format needed, etc.)</p></li>
</ol>
<p>There are other advantages (personal and public) described in an issue of <a href="https://academic.oup.com/biostatistics/issue/11/3">Biostatistics</a> dedicated to reproducibility. <a href="https://doi.org/10.1093/biostatistics/kxq028">David Donoho’s response is particularly useful.</a></p>
<p>As you might expect, there are <a href="https://academic.oup.com/biostatistics/article/10/3/405/293660">many different</a> <a href="https://ropensci.github.io/reproducibility-guide/sections/introduction/">types of reproducibility</a>.</p>
<ul>
<li>Code reproducibility - allows replication of the computing aspects of the study. Includes code, software, hardware, and implementation details.</li>
<li>Data reproducibility - allows replication of the non-computational parts of the study (e.g. experiment and data collection). This may include making protocols and data available.</li>
<li>Statistical reproducibility - allows replication of the statistical methods. Includes details about model parameters, thresholds, etc. and may also include study pre-registration to prevent p-hacking.</li>
</ul>
<p>There are also many levels of reproducibility. Much of the computer code written in the 1960s is no longer runnable today, because the computer architecture it was written for is not available anymore. Code which depends on URLs is vulnerable to website rearrangements or the content no longer being hosted. Archiving projects on GitHub is nice, but what happens if GitHub goes down? It’s important to decide what type of reproducibility is important for a particular project, and then design the project’s workflow around that process.</p>
<p>For most of my projects, I don’t worry about software versioning (I may archive my sessionInfo() so that package versions are documented) and storing the software packages alongside the code and data. As much as possible, I keep the code and the data (if it’s small) on GitHub in a public repository for people to access, along with any manuscripts or presentations related to the project. Manuscripts are written in knitr or r markdown, so that the code is documented by the context of the project, and every image in the article generated by R has corresponding code available. This ensures that</p>
<ol style="list-style-type: decimal">
<li>my code (and data) is stored somewhere off-site (backed up in the cloud)</li>
<li>my code is available if others want to use it</li>
<li>I can track my contributions to a project relative to any collaborators</li>
<li>I can undo changes that I make if something in the code breaks.</li>
<li>I can undo changes my collaborators inadvertently make because all changes are recorded.</li>
<li>I can reuse blocks of code easily (and find them easily on GitHub)</li>
</ol>
<p>In situations where I run experiments, I also make sure that any experimental stimuli or other code that would contribute to the execution and data collection part of the experiment is also included in the repository. This may involve archiving intermediate results that would not normally be archived so that exact stimuli can be regenerated “just in case.”</p>
<!-- Why reproducibility is convenient -->
<p>The github reproducibility work flow is convenient - it allows for me to easily collaborate with others, without emailing versions of code and documents back and forth or dealing with Dropbox version conflicts. I can revert changes that are made that had unintentional effects fairly easily. I can sync my files across multiple machines effortlessly. And if necessary, I can look back at the changes I’ve made and see why I made them, or what I’ve already tried.</p>
<div id="reproducibility-references-and-reading" class="section level3 unnumbered learn-more">
<h3>Reproducibility References and Reading</h3>
<p>I highly recommend scanning these resources to get a good sense of the different ways the word “reproducibility” is used in the literature.</p>
<ul>
<li><a href="http://adv-r.had.co.nz/Reproducibility.html">Advanced R’s reproducibility guide</a></li>
<li><a href="https://timogrossenbacher.ch/2017/07/a-truly-reproducible-r-workflow/">A reproducible R workflow</a></li>
<li><a href="https://ropensci.github.io/reproducibility-guide/sections/introduction/">ROpenSci’s guide to reproducibility</a></li>
<li><a href="https://doi.org/10.1093/biostatistics/kxp014">Roger Peng’s Biostatistics editorial on reproducibility</a></li>
<li><a href="https://academic.oup.com/biostatistics/issue/11/3">The Biostatistics reproducibility issue w/ responses to the editorial and associated commentary</a></li>
</ul>
</div>
<div id="rmarkdown" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Markdown and R</h3>
<p>In this class, we’re primarily going to use rmarkdown to create dynamic documents. Markdown itself is a special style of text that is intended to allow you to do basic formatting without having to pause to actually click the buttons (if you were writing in word). It integrates equation functionality (so you can type mathematical equations using LaTeX syntax) and also allows for the use of templates (so you can write whole journal articles in a text editor). Markdown is also program agnostic - it will allow you to compile your work into HTML, word, or PDF form.</p>
<div class="figure">
<img src="https://github.com/allisonhorst/stats-illustrations/raw/master/rstats-artwork/rmarkdown_wizards.png" alt="" />
<p class="caption">Rmarkdown is magic. (image by Allison Horst)</p>
</div>
<p>Markdown documents must be <em>compiled</em> - a computer program runs and transforms the text file into a full document. RStudio has markdown functionality built-in, and also supports <code>rmarkdown</code>, which is a markdown variant designed to make it easy to integrate R code with document creation (so-called literate programming). There are other markdown programs which extend markdown’s functionality so that you can write a book (like this one), create presentations or posters, or maintain a blog in markdown.</p>
<p>Rmarkdown, despite the name, also allows you to integrate the results from code in other languages. As you saw in <a href="intro-prog.html#intro-prog">the last chapter</a>, SAS code can be integrated into markdown as well. Other languages commonly used include python, julia, SQL, Bash, C++, and Stan.</p>
<div class="learn-more">
<p>There is a full set of <a href="https://rmarkdown.rstudio.com/lesson-1.html">Rmarkdown tutorials</a> from RStudio. There is also a handy <a href="https://rmarkdown.rstudio.com/lesson-15.html">cheatsheet</a>. If you run into trouble or want to do something more complicated, <a href="https://bookdown.org/yihui/rmarkdown-cookbook/">there is an Rmarkdown cookbook</a> which contains a number of useful tricks.</p>
</div>
<div class="tryitout">
<p>Or, you can take the “jump right in” approach - open RStudio, File -&gt; New -&gt; Rmarkdown document. To compile it, click the knit button in the bar at the top of the text editor window. Make changes to the text and the R code, compile it, and see what happens. Voila! You’re a markdow expert!</p>
</div>
<p>Rmarkdown documents may contain code used to support an analysis, but they are usually not the best way to develop an analysis method - they are better for documentation, writing tutorials, and other scenarios where you need both text explanations and code/analysis/results. There are other “containers” for code, though, including functions, scripts, and packages. Each has their own advantages and disadvantages, and can be used together.</p>
</div>
<div id="rmarkdown-with-sas" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Rmarkdown with… SAS?</h3>
<p>You may have noticed that I’ve been including SAS chunks throughout this book, and even in your homework assignments.</p>
<div class="learn-more">
<p>Here’s how that’s set up.
<a href="http://ritsokiguess.site/docs/2018/08/20/sas-in-r-markdown/">SAS in Rmarkdown – guide</a>.</p>
</div>
<p>It’s really fairly easy, which surprised me – I was expecting it to be a lot more involved to set SASmarkdown up.</p>
<p>SASmarkdown will not work if you don’t have the following setup(s):</p>
<ul>
<li>Windows + SAS (not Community Edition) + R</li>
<li>Mac + Parallels (with SAS and RStudio both installed in parallels)</li>
<li>Linux + SAS + R</li>
</ul>
<p>If you’re using Community Edition, you cannot use SASMarkdown. Instead, you’ll have to submit SAS files separately from your Rmarkdown code, or use the server set up by HCC that has the correct configuration.</p>
<p>If you are using SAS Community Edition, you are still expected to ensure your code is fully reproducible on other computers.</p>
</div>
</div>
<div id="functions-and-modules" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Functions and Modules</h2>
<p>A function (or a module, in SAS) is a block of code which is only run when it is called. It takes arguments (known as parameters) and returns data or some other value.</p>
<div class="learn-more">
<p>There is some extensive material on this subject in <a href="https://r4ds.had.co.nz/functions.html">R for Data Science on functions</a>. If you aren’t familiar with functions, you should read that material before proceeding.</p>
</div>
<p>Let’s look at the structure of a generic function in pseudocode (code that isn’t really part of any language, but describes the steps of a program):</p>
<pre><code>my_function_name = function(param1, param2 = 3) {
  step1 // do something
  
  step2 // do something else 
  
  return step_1/step2
}
</code></pre>
<p>The first part of a function declaration (storing information in a named object) is the function’s intended name, <code>my_function_name</code>. Then, we indicate that we are defining a function, and what <strong>parameters</strong> our function requires. For <code>param1</code>, we do not provide a default value, but for <code>param2</code>, we indicate that the <strong>default value</strong> is 3. Thus, if we call the function (tell the program to run this function with certain arguments and provide the result), we could either say <code>my_function_name(param1 = value1, param2 = value2)</code> or <code>my_function_name(param1 = value1)</code> (which is equivalent to <code>my_function_name(param1 = value1, param2 = 3)</code>). In R, you can even say <code>my_function_name(value1, value2)</code> and the assumption is that you’ve supplied the parameters in the correct order.<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a> Inside the function block (indicated by <code>{}</code> here, but some languages may use <code>do ... end;</code>), we perform whatever steps we’ve decided to include in the function, and then at the end of the function, we <strong>return</strong> a value - the function exits, and leaves behind some information.</p>
<p>In R, functions look like this:</p>
<blockquote>
<p><code>function( arglist ) {</code><br />
<code>expr</code><br />
<code>return(value)</code><br />
<code>}</code></p>
</blockquote>
<p>In SAS, functions are called modules. The documentation for a module is below:</p>
<pre><code>Statements That Define and Execute Modules
Modules are used to create a user-defined subroutine or function. 

A module definition begins with a START statement, which has the following general form:
START &lt;name&gt; &lt;( arguments )&gt; &lt;GLOBAL( arguments )&gt;;

A module definition ends with a FINISH statement, which has the following general form:
FINISH &lt;name&gt;;

To execute a module, you can use either a RUN statement or a CALL statement. 
The general forms of these statements are as follows:
`RUN &lt;name&gt; &lt;( arguments)&gt;;
`CALL &lt;name&gt; &lt;( arguments)&gt;;`
The only difference between the RUN and CALL statements is the order of resolution.</code></pre>
<p><a href="https://support.sas.com/rnd/app/iml/programming.html">Source: SAS function reference</a></p>
<p>Let’s try functions out by writing a simple function that takes two numbers as arguments and adds them together.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="organization.html#cb90-1" aria-hidden="true" tabindex="-1"></a>adder <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb90-2"><a href="organization.html#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(a <span class="sc">+</span> b)</span>
<span id="cb90-3"><a href="organization.html#cb90-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb90-4"><a href="organization.html#cb90-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-5"><a href="organization.html#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="fu">adder</span>(<span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb90-6"><a href="organization.html#cb90-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">7</span></span></code></pre></div>
<pre class="saslog"><code>2          proc IML;
NOTE: IML Ready
WARNING: IML is now in syntax-check-only mode due to errors in previous 
         steps. No statements will be executed.
3          
4            start adder(a, b);
5              return(a + b);
6            finish;
NOTE: Module ADDER defined.
7          
8            c = adder(3, 4);
8        !                    /* In IML, you can use the function like this
8        !  as well */
9            print c;
10         
11         quit;
NOTE: Exiting IML.
NOTE: PROCEDURE IML used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12         

ERROR: Errors printed on pages 4,5,7.
                              The SAS System                              1
                                             08:58 Thursday, April 22, 2021

                       --------- List = ick---------

                                  Item 1

                                  olives

                                  Item 2

                                  sausage

                                  Item 3

                                 anchovies

                      --------- List = crust---------

                                  Item 1

                                  flour 

                                  Item 2

                                  yeast 

                                  Item 3

                                  salt  

                                  Item 4

                                  water 

                 --------- List = yummy_toppings---------

                                  Item 1

                                  asiago

                                  Item 2

                                  fontina


                              The SAS System                              2
                                             08:58 Thursday, April 22, 2021

                                  Item 3

                                blue cheese

                                  Item 4

                                  bacon 

                                  Item 5

                                 scallions
            Average math test scores under the influence of LSD           3
                                             08:58 Thursday, April 22, 2021

                          The DATASETS Procedure

Data Set Name        WORK.MATHLSD                  Observations          7 
Member Type          DATA                          Variables             2 
Engine               V9                            Indexes               0 
Created              04/22/2021 08:58:38           Observation Length    16
Last Modified        04/22/2021 08:58:38           Deleted Observations  0 
Protection                                         Compressed            NO
Data Set Type                                      Sorted                NO
Label                                                                      
Data Representation  SOLARIS_X86_64,                                       
                     LINUX_X86_64, ALPHA_TRU64,                            
                     LINUX_IA64                                            
Encoding             latin1  Western (ISO)                                 

                     Engine/Host Dependent Information

Data Set Page Size          65536                                          
Number of Data Set Pages    1                                              
First Data Page             1                                              
Max Obs per Page            4061                                           
Obs in First Data Page      7                                              
Number of Data Set Repairs  0                                              
Filename                    /tmp/SAS_work90320004A7DD_                     
                            silicon/mathlsd.sas7bdat                       
Release Created             9.0401M6                                       
Host Created                Linux                                          
Inode Number                11278101                                       
Access Permission           rw-rw-r--                                      
Owner Name                  susan                                          
File Size                   128KB                                          
File Size (bytes)           131072                                         

                Alphabetic List of Variables and Attributes
 
                       #    Variable    Type    Len

                       1    Drugs       Num       8
                       2    Score       Num       8
            Average math test scores under the influence of LSD           4
                                             08:58 Thursday, April 22, 2021

                           Obs    Drugs    Score

                            1      1.17    78.93
                            2      2.97    58.20
                            3      3.26    67.47
                            4      4.69    37.47
                            5      5.83    45.65
                            6      6.00    32.92
                            7      6.41    29.97
            Average math test scores under the influence of LSD           5
                                             08:58 Thursday, April 22, 2021

                                     x

                     1         2         3         4         5
                     6         7         8         9        10
                    11        12        13        14        15
                    16        17        18        19        20

                                     y

                                   11        12
                                   16        17
            Average math test scores under the influence of LSD           6
                                             08:58 Thursday, April 22, 2021

                     Obs    _TYPE_    _FREQ_       x

                      1        0        466     233168
            Average math test scores under the influence of LSD           7
                                             08:58 Thursday, April 22, 2021

                    Obs     name     status     present

                     1     Edison    nice        toy   
                     2     Alex      naughty     coal  
                     3     Susan                 toy   
                     4     Ryan      neutral     toy   </code></pre>
<p>Of course, it’s not just important to be able to write your own functions. It’s also helpful to be able to see how functions are written, both to explore how a method is implemented and for debugging purposes. In SAS, this is generally not an option, because SAS is closed source, but in R, you can see the code behind any function which is implemented in R (it is harder to see functions implemented in C or C++, but not impossible) by typing the function name (no parentheses) into the command prompt.</p>
<details>
<summary>
Let’s examine how the colSums() function is implemented
</summary>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="organization.html#cb92-1" aria-hidden="true" tabindex="-1"></a>colSums</span>
<span id="cb92-2"><a href="organization.html#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (x, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, <span class="at">dims =</span> 1L) </span>
<span id="cb92-3"><a href="organization.html#cb92-3" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb92-4"><a href="organization.html#cb92-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">is.data.frame</span>(x)) </span>
<span id="cb92-5"><a href="organization.html#cb92-5" aria-hidden="true" tabindex="-1"></a>        x <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(x)</span>
<span id="cb92-6"><a href="organization.html#cb92-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.array</span>(x) <span class="sc">||</span> <span class="fu">length</span>(dn <span class="ot">&lt;-</span> <span class="fu">dim</span>(x)) <span class="sc">&lt;</span> 2L) </span>
<span id="cb92-7"><a href="organization.html#cb92-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">&quot;&#39;x&#39; must be an array of at least two dimensions&quot;</span>)</span>
<span id="cb92-8"><a href="organization.html#cb92-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (dims <span class="sc">&lt;</span> 1L <span class="sc">||</span> dims <span class="sc">&gt;</span> <span class="fu">length</span>(dn) <span class="sc">-</span> 1L) </span>
<span id="cb92-9"><a href="organization.html#cb92-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">&quot;invalid &#39;dims&#39;&quot;</span>)</span>
<span id="cb92-10"><a href="organization.html#cb92-10" aria-hidden="true" tabindex="-1"></a>    n <span class="ot">&lt;-</span> <span class="fu">prod</span>(dn[id <span class="ot">&lt;-</span> <span class="fu">seq_len</span>(dims)])</span>
<span id="cb92-11"><a href="organization.html#cb92-11" aria-hidden="true" tabindex="-1"></a>    dn <span class="ot">&lt;-</span> dn[<span class="sc">-</span>id]</span>
<span id="cb92-12"><a href="organization.html#cb92-12" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> <span class="cf">if</span> (<span class="fu">is.complex</span>(x)) </span>
<span id="cb92-13"><a href="organization.html#cb92-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">.Internal</span>(<span class="fu">colSums</span>(<span class="fu">Re</span>(x), n, <span class="fu">prod</span>(dn), na.rm)) <span class="sc">+</span> (<span class="dv">0</span><span class="sc">+</span>1i) <span class="sc">*</span> </span>
<span id="cb92-14"><a href="organization.html#cb92-14" aria-hidden="true" tabindex="-1"></a>            <span class="fu">.Internal</span>(<span class="fu">colSums</span>(<span class="fu">Im</span>(x), n, <span class="fu">prod</span>(dn), na.rm))</span>
<span id="cb92-15"><a href="organization.html#cb92-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="fu">.Internal</span>(<span class="fu">colSums</span>(x, n, <span class="fu">prod</span>(dn), na.rm))</span>
<span id="cb92-16"><a href="organization.html#cb92-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(dn) <span class="sc">&gt;</span> 1L) {</span>
<span id="cb92-17"><a href="organization.html#cb92-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">dim</span>(z) <span class="ot">&lt;-</span> dn</span>
<span id="cb92-18"><a href="organization.html#cb92-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">dimnames</span>(z) <span class="ot">&lt;-</span> <span class="fu">dimnames</span>(x)[<span class="sc">-</span>id]</span>
<span id="cb92-19"><a href="organization.html#cb92-19" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb92-20"><a href="organization.html#cb92-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="fu">names</span>(z) <span class="ot">&lt;-</span> <span class="fu">dimnames</span>(x)[[dims <span class="sc">+</span> 1L]]</span>
<span id="cb92-21"><a href="organization.html#cb92-21" aria-hidden="true" tabindex="-1"></a>    z</span>
<span id="cb92-22"><a href="organization.html#cb92-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb92-23"><a href="organization.html#cb92-23" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>bytecode<span class="sc">:</span> <span class="dv">0x56038117d2d8</span><span class="sc">&gt;</span></span>
<span id="cb92-24"><a href="organization.html#cb92-24" aria-hidden="true" tabindex="-1"></a><span class="er">&lt;</span>environment<span class="sc">:</span> namespace<span class="sc">:</span>base<span class="sc">&gt;</span></span></code></pre></div>
<p>You can see that the first 3 steps in the function are if statements to test whether the inputs are acceptable - x must be a data frame, a matrix, or an array (with 2+ dimensions).</p>
<p>The next couple of lines test to see whether there are additional “column” dimensions (don’t worry if you don’t understand what’s going on in this code - it’s highly optimized and a bit arcane).</p>
<p>Then, the function checks to see if x is real-valued or complex, and if it’s complex, computes the real and imaginary sums separately.</p>
<p>The <code>.Internal(colSums(x...))</code> part is calling a C function - basically, functions written in C are faster than R because they’re compiled, so this speeds basic operations up in R.</p>
Then there are statements that transfer dimension names over to the summed object. At the end of the function, the last value computed is returned automatically (in this case, z).
</details>
<div id="try-it-out-7" class="section level3 unnumbered tryitout">
<h3>Try it out</h3>
<p>Write a function named <code>circle_area</code> which computes the area of a circle given the radius. Make sure to use reasonable parameter names! (Note: in R, pi is conveniently stored in the variable of the same name - it can be overwritten if you want to do so, but why would you want to do that? In SAS, you can get the value of pi using <code>constant("pi")</code>)</p>
<details>
<summary>
Solution
</summary>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="organization.html#cb93-1" aria-hidden="true" tabindex="-1"></a>circle_area <span class="ot">&lt;-</span> <span class="cf">function</span>(r) {</span>
<span id="cb93-2"><a href="organization.html#cb93-2" aria-hidden="true" tabindex="-1"></a>  r<span class="sc">^</span><span class="dv">2</span><span class="sc">*</span>pi <span class="co"># automatically returned as the last computed value</span></span>
<span id="cb93-3"><a href="organization.html#cb93-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb93-4"><a href="organization.html#cb93-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-5"><a href="organization.html#cb93-5" aria-hidden="true" tabindex="-1"></a><span class="fu">circle_area</span>(<span class="dv">5</span>)</span>
<span id="cb93-6"><a href="organization.html#cb93-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">78.53982</span></span></code></pre></div>
<p>A more complete and robust answer might include a test for numeric <code>r</code>:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="organization.html#cb94-1" aria-hidden="true" tabindex="-1"></a>circle_area <span class="ot">&lt;-</span> <span class="cf">function</span>(r) {</span>
<span id="cb94-2"><a href="organization.html#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(r)) {</span>
<span id="cb94-3"><a href="organization.html#cb94-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;Supplied radius must be numeric&quot;</span>) <span class="co"># This issues an error</span></span>
<span id="cb94-4"><a href="organization.html#cb94-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb94-5"><a href="organization.html#cb94-5" aria-hidden="true" tabindex="-1"></a>  r<span class="sc">^</span><span class="dv">2</span><span class="sc">*</span>pi <span class="co"># automatically returned as the last computed value</span></span>
<span id="cb94-6"><a href="organization.html#cb94-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb94-7"><a href="organization.html#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="fu">circle_area</span>(<span class="dv">5</span>)</span>
<span id="cb94-8"><a href="organization.html#cb94-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">78.53982</span></span></code></pre></div>
<pre class="sashtmllog"><code>6          proc IML;
NOTE: IML Ready
WARNING: IML is now in syntax-check-only mode due to errors in previous 
         steps. No statements will be executed.
7          
8            start circle_area(r);
9              pi = constant(&quot;pi&quot;);
10             return(pi*r**2);
11           finish;
NOTE: Module CIRCLE_AREA defined.
12         
13           c = circle_area(5);
14           print c;
15         
16         quit;
NOTE: Exiting IML.
NOTE: PROCEDURE IML used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

17         

ERROR: Errors printed on pages 4,5,7.</code></pre>
</details>
</div>
<p>One last trick to note: functions generally can only return one object. If you need to return more than one thing, put the objects into a list or another data structure, and return that - then you can take the list/structure apart outside the function to use the returned values separately.</p>
<div id="scope" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Scope</h3>
<p>The scope of a variable is the space in the program where a variable is defined and can be accessed. A <strong>local</strong> variable is one which can only be accessed within a function or block of code - it does not exist outside of that code. A <strong>global</strong> variable is one which is available to the entire program.</p>
<p>In R, every function is defined in a certain environment, and once it is defined, executed in a specific environment. Think of an environment as a space full of available variables, functions, and objects. Any defined object or variable that a function has access to is <strong>in scope</strong>. When you are inside of a function block, you have access to values defined within the function, plus any other values outside the function. When there are two variables with the same name, the object in the environment which is “closest” is used.</p>
<details>
<summary>
Demonstration of scoping in R
</summary>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="organization.html#cb96-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-2"><a href="organization.html#cb96-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb96-3"><a href="organization.html#cb96-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-4"><a href="organization.html#cb96-4" aria-hidden="true" tabindex="-1"></a>myfun <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb96-5"><a href="organization.html#cb96-5" aria-hidden="true" tabindex="-1"></a>  a <span class="sc">+</span> b <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb96-6"><a href="organization.html#cb96-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb96-7"><a href="organization.html#cb96-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-8"><a href="organization.html#cb96-8" aria-hidden="true" tabindex="-1"></a><span class="fu">myfun</span>(<span class="dv">5</span>, <span class="dv">6</span>) <span class="co"># a is 5 inside the function, so that overrides the </span></span>
<span id="cb96-9"><a href="organization.html#cb96-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">13</span></span>
<span id="cb96-10"><a href="organization.html#cb96-10" aria-hidden="true" tabindex="-1"></a>            <span class="co"># a defined outside the function</span></span>
<span id="cb96-11"><a href="organization.html#cb96-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-12"><a href="organization.html#cb96-12" aria-hidden="true" tabindex="-1"></a><span class="fu">myfun</span>(a, <span class="dv">3</span>) <span class="co"># this references the a outside the function</span></span>
<span id="cb96-13"><a href="organization.html#cb96-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">8</span></span></code></pre></div>
<div class="figure">
<img src="image/03_myfun_scope.png" alt="" />
<p class="caption">Scope diagram. When myfun() is called, the calling environment contains the two parameters a and b.</p>
</div>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="organization.html#cb97-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb97-2"><a href="organization.html#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="organization.html#cb97-3" aria-hidden="true" tabindex="-1"></a>myfun2 <span class="ot">&lt;-</span> <span class="cf">function</span>(d) {</span>
<span id="cb97-4"><a href="organization.html#cb97-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">myfun</span>(a, d)</span>
<span id="cb97-5"><a href="organization.html#cb97-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb97-6"><a href="organization.html#cb97-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-7"><a href="organization.html#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="fu">myfun2</span>(<span class="dv">3</span>) <span class="co"># the only a in scope inside fun2 is the a defined at the top of the chunk</span></span>
<span id="cb97-8"><a href="organization.html#cb97-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">8</span></span></code></pre></div>
<div class="figure">
<img src="image/03_myfun2_scope.png" alt="" />
<p class="caption">Scope diagram. When myfun2() is called, the calling environment contains only a parameter <span class="math inline">\(d\)</span>. <span class="math inline">\(a\)</span> is pulled from the global environment, as there is no parameter <span class="math inline">\(a\)</span> in the myfun2 calling environment.</p>
</div>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="organization.html#cb98-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb98-2"><a href="organization.html#cb98-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-3"><a href="organization.html#cb98-3" aria-hidden="true" tabindex="-1"></a>myfun3 <span class="ot">&lt;-</span> <span class="cf">function</span>(a, d) {</span>
<span id="cb98-4"><a href="organization.html#cb98-4" aria-hidden="true" tabindex="-1"></a>  b <span class="ot">&lt;-</span> a; <span class="co"># make a copy of the value</span></span>
<span id="cb98-5"><a href="organization.html#cb98-5" aria-hidden="true" tabindex="-1"></a>  a <span class="ot">&lt;-</span> <span class="dv">250</span>;</span>
<span id="cb98-6"><a href="organization.html#cb98-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">myfun</span>(b, d)</span>
<span id="cb98-7"><a href="organization.html#cb98-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb98-8"><a href="organization.html#cb98-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-9"><a href="organization.html#cb98-9" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb98-10"><a href="organization.html#cb98-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3</span></span>
<span id="cb98-11"><a href="organization.html#cb98-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-12"><a href="organization.html#cb98-12" aria-hidden="true" tabindex="-1"></a><span class="fu">myfun3</span>(<span class="dv">5</span>, <span class="dv">3</span>) <span class="co"># now, a is defined inside fun3 as a = 5, so there is an a in </span></span>
<span id="cb98-13"><a href="organization.html#cb98-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">10</span></span>
<span id="cb98-14"><a href="organization.html#cb98-14" aria-hidden="true" tabindex="-1"></a>             <span class="co"># fun3&#39;s scope that isn&#39;t in the global environment.</span></span>
<span id="cb98-15"><a href="organization.html#cb98-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-16"><a href="organization.html#cb98-16" aria-hidden="true" tabindex="-1"></a>a <span class="co"># value of a hasn&#39;t changed</span></span>
<span id="cb98-17"><a href="organization.html#cb98-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3</span></span></code></pre></div>
<div class="figure">
<img src="image/03_myfun3_scope.png" alt="" />
<p class="caption">Scope diagram. When myfun3() is called, the calling environment contains parameters a and d, which are then copied into the calling environment of myfun as <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span>. The variable <span class="math inline">\(a\)</span> in the global environment is ignored.</p>
</div>
</details>
<p>If you want to avoid too many issues with scoping (because scoping rules are complicated), the simplest way is to not reuse variable names inside of a function if you’ve already used those names outside the function (this holds for all languages, really).</p>
<p>R does have global variables and a global assignment operator, <code>&lt;&lt;-</code>, but the use of global variables is strongly discouraged, and global variables are not permitted in e.g. CRAN packages.</p>
<p>In SAS, scoping rules are more like those in other programming languages - you have to keep track of how arguments are made available to the function.</p>
<details>
<summary>
Demonstration of scoping in SAS. Environments do not inherit variables from the calling environment.
</summary>
<pre class="saslog"><code>2          PROC IML;
NOTE: IML Ready
WARNING: IML is now in syntax-check-only mode due to errors in previous 
         steps. No statements will be executed.
3          a = 3;
4          
5          start myfun(a, b);
6            return a + b + 2;
7          finish;
NOTE: Module MYFUN defined.
8          
9          r1 = myfun(5, 6);
10         /* a is 5 inside the function, so that overrides the
11            a defined outside the function */
12         
13         r2 = myfun(a, 3);
14         /* this references the a outside the function */
15         
16         print r1 r2;
17         quit;
NOTE: Exiting IML.
NOTE: PROCEDURE IML used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

18         

ERROR: Errors printed on pages 4,5,7.
                              The SAS System                              1
                                             08:58 Thursday, April 22, 2021

                       --------- List = ick---------

                                  Item 1

                                  olives

                                  Item 2

                                  sausage

                                  Item 3

                                 anchovies

                      --------- List = crust---------

                                  Item 1

                                  flour 

                                  Item 2

                                  yeast 

                                  Item 3

                                  salt  

                                  Item 4

                                  water 

                 --------- List = yummy_toppings---------

                                  Item 1

                                  asiago

                                  Item 2

                                  fontina


                              The SAS System                              2
                                             08:58 Thursday, April 22, 2021

                                  Item 3

                                blue cheese

                                  Item 4

                                  bacon 

                                  Item 5

                                 scallions
            Average math test scores under the influence of LSD           3
                                             08:58 Thursday, April 22, 2021

                          The DATASETS Procedure

Data Set Name        WORK.MATHLSD                  Observations          7 
Member Type          DATA                          Variables             2 
Engine               V9                            Indexes               0 
Created              04/22/2021 08:58:38           Observation Length    16
Last Modified        04/22/2021 08:58:38           Deleted Observations  0 
Protection                                         Compressed            NO
Data Set Type                                      Sorted                NO
Label                                                                      
Data Representation  SOLARIS_X86_64,                                       
                     LINUX_X86_64, ALPHA_TRU64,                            
                     LINUX_IA64                                            
Encoding             latin1  Western (ISO)                                 

                     Engine/Host Dependent Information

Data Set Page Size          65536                                          
Number of Data Set Pages    1                                              
First Data Page             1                                              
Max Obs per Page            4061                                           
Obs in First Data Page      7                                              
Number of Data Set Repairs  0                                              
Filename                    /tmp/SAS_work2C380004A898_                     
                            silicon/mathlsd.sas7bdat                       
Release Created             9.0401M6                                       
Host Created                Linux                                          
Inode Number                11278101                                       
Access Permission           rw-rw-r--                                      
Owner Name                  susan                                          
File Size                   128KB                                          
File Size (bytes)           131072                                         

                Alphabetic List of Variables and Attributes
 
                       #    Variable    Type    Len

                       1    Drugs       Num       8
                       2    Score       Num       8
            Average math test scores under the influence of LSD           4
                                             08:58 Thursday, April 22, 2021

                           Obs    Drugs    Score

                            1      1.17    78.93
                            2      2.97    58.20
                            3      3.26    67.47
                            4      4.69    37.47
                            5      5.83    45.65
                            6      6.00    32.92
                            7      6.41    29.97
            Average math test scores under the influence of LSD           5
                                             08:58 Thursday, April 22, 2021

                                     x

                     1         2         3         4         5
                     6         7         8         9        10
                    11        12        13        14        15
                    16        17        18        19        20

                                     y

                                   11        12
                                   16        17
            Average math test scores under the influence of LSD           6
                                             08:58 Thursday, April 22, 2021

                     Obs    _TYPE_    _FREQ_       x

                      1        0        466     233168
            Average math test scores under the influence of LSD           7
                                             08:58 Thursday, April 22, 2021

                    Obs     name     status     present

                     1     Edison    nice        toy   
                     2     Alex      naughty     coal  
                     3     Susan                 toy   
                     4     Ryan      neutral     toy   </code></pre>
<p>In SAS, the equivalent version of the program used to demonstrate lexical scoping in R produces an error. In SAS, you cannot assume the function has access to values defined outside of that function that are not passed into the function as arguments.</p>
<pre class="saslog"><code>2          PROC IML;
NOTE: IML Ready
WARNING: IML is now in syntax-check-only mode due to errors in previous 
         steps. No statements will be executed.
3          a = 3;
4          
5          start myfun(a, b);
6            return a + b + 2;
7          finish;
NOTE: Module MYFUN defined.
8          
9          start myfun2(d);
10           return myfun(a, d);
10       !                       /* SAS complains because a is not defined
10       ! */
11         finish;
NOTE: Module MYFUN2 defined.
12         
13         r1 = myfun2(3);
14         
15         print r1;
16         quit;
NOTE: Exiting IML.
NOTE: PROCEDURE IML used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

ERROR: Errors printed on pages 4,5,7.
                              The SAS System                              1
                                             08:58 Thursday, April 22, 2021

                       --------- List = ick---------

                                  Item 1

                                  olives

                                  Item 2

                                  sausage

                                  Item 3

                                 anchovies

                      --------- List = crust---------

                                  Item 1

                                  flour 

                                  Item 2

                                  yeast 

                                  Item 3

                                  salt  

                                  Item 4

                                  water 

                 --------- List = yummy_toppings---------

                                  Item 1

                                  asiago

                                  Item 2

                                  fontina


                              The SAS System                              2
                                             08:58 Thursday, April 22, 2021

                                  Item 3

                                blue cheese

                                  Item 4

                                  bacon 

                                  Item 5

                                 scallions
            Average math test scores under the influence of LSD           3
                                             08:58 Thursday, April 22, 2021

                          The DATASETS Procedure

Data Set Name        WORK.MATHLSD                  Observations          7 
Member Type          DATA                          Variables             2 
Engine               V9                            Indexes               0 
Created              04/22/2021 08:58:39           Observation Length    16
Last Modified        04/22/2021 08:58:39           Deleted Observations  0 
Protection                                         Compressed            NO
Data Set Type                                      Sorted                NO
Label                                                                      
Data Representation  SOLARIS_X86_64,                                       
                     LINUX_X86_64, ALPHA_TRU64,                            
                     LINUX_IA64                                            
Encoding             latin1  Western (ISO)                                 

                     Engine/Host Dependent Information

Data Set Page Size          65536                                          
Number of Data Set Pages    1                                              
First Data Page             1                                              
Max Obs per Page            4061                                           
Obs in First Data Page      7                                              
Number of Data Set Repairs  0                                              
Filename                    /tmp/SAS_workB8180004A8FD_                     
                            silicon/mathlsd.sas7bdat                       
Release Created             9.0401M6                                       
Host Created                Linux                                          
Inode Number                11278101                                       
Access Permission           rw-rw-r--                                      
Owner Name                  susan                                          
File Size                   128KB                                          
File Size (bytes)           131072                                         

                Alphabetic List of Variables and Attributes
 
                       #    Variable    Type    Len

                       1    Drugs       Num       8
                       2    Score       Num       8
            Average math test scores under the influence of LSD           4
                                             08:58 Thursday, April 22, 2021

                           Obs    Drugs    Score

                            1      1.17    78.93
                            2      2.97    58.20
                            3      3.26    67.47
                            4      4.69    37.47
                            5      5.83    45.65
                            6      6.00    32.92
                            7      6.41    29.97
            Average math test scores under the influence of LSD           5
                                             08:58 Thursday, April 22, 2021

                                     x

                     1         2         3         4         5
                     6         7         8         9        10
                    11        12        13        14        15
                    16        17        18        19        20

                                     y

                                   11        12
                                   16        17
            Average math test scores under the influence of LSD           6
                                             08:58 Thursday, April 22, 2021

                     Obs    _TYPE_    _FREQ_       x

                      1        0        466     233168
            Average math test scores under the influence of LSD           7
                                             08:58 Thursday, April 22, 2021

                    Obs     name     status     present

                     1     Edison    nice        toy   
                     2     Alex      naughty     coal  
                     3     Susan                 toy   
                     4     Ryan      neutral     toy   </code></pre>
</details>
<p>First, let’s consider the similarities: like R, functions have a local scope, and changing a similarly named value inside the function doesn’t change the value outside the function.</p>
<pre class="saslog"><code>2          PROC IML;
NOTE: IML Ready
WARNING: IML is now in syntax-check-only mode due to errors in previous 
         steps. No statements will be executed.
3          start myfun(x);
4            y = 2 * x;
5            print y[label=&quot;y inside function (local)&quot;];
6            return 1;
7          finish;
NOTE: Module MYFUN defined.
8          
9          y = 0;
10         x = 1:5;
11         res = myfun(x);
12         print y[label=&quot;y outside function&quot;];
13         
14         quit;
NOTE: Exiting IML.
NOTE: PROCEDURE IML used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

15         

ERROR: Errors printed on pages 4,5,7.
                              The SAS System                              1
                                             08:58 Thursday, April 22, 2021

                       --------- List = ick---------

                                  Item 1

                                  olives

                                  Item 2

                                  sausage

                                  Item 3

                                 anchovies

                      --------- List = crust---------

                                  Item 1

                                  flour 

                                  Item 2

                                  yeast 

                                  Item 3

                                  salt  

                                  Item 4

                                  water 

                 --------- List = yummy_toppings---------

                                  Item 1

                                  asiago

                                  Item 2

                                  fontina


                              The SAS System                              2
                                             08:58 Thursday, April 22, 2021

                                  Item 3

                                blue cheese

                                  Item 4

                                  bacon 

                                  Item 5

                                 scallions
            Average math test scores under the influence of LSD           3
                                             08:58 Thursday, April 22, 2021

                          The DATASETS Procedure

Data Set Name        WORK.MATHLSD                  Observations          7 
Member Type          DATA                          Variables             2 
Engine               V9                            Indexes               0 
Created              04/22/2021 08:58:39           Observation Length    16
Last Modified        04/22/2021 08:58:39           Deleted Observations  0 
Protection                                         Compressed            NO
Data Set Type                                      Sorted                NO
Label                                                                      
Data Representation  SOLARIS_X86_64,                                       
                     LINUX_X86_64, ALPHA_TRU64,                            
                     LINUX_IA64                                            
Encoding             latin1  Western (ISO)                                 

                     Engine/Host Dependent Information

Data Set Page Size          65536                                          
Number of Data Set Pages    1                                              
First Data Page             1                                              
Max Obs per Page            4061                                           
Obs in First Data Page      7                                              
Number of Data Set Repairs  0                                              
Filename                    /tmp/SAS_workFFA40004A959_                     
                            silicon/mathlsd.sas7bdat                       
Release Created             9.0401M6                                       
Host Created                Linux                                          
Inode Number                11278101                                       
Access Permission           rw-rw-r--                                      
Owner Name                  susan                                          
File Size                   128KB                                          
File Size (bytes)           131072                                         

                Alphabetic List of Variables and Attributes
 
                       #    Variable    Type    Len

                       1    Drugs       Num       8
                       2    Score       Num       8
            Average math test scores under the influence of LSD           4
                                             08:58 Thursday, April 22, 2021

                           Obs    Drugs    Score

                            1      1.17    78.93
                            2      2.97    58.20
                            3      3.26    67.47
                            4      4.69    37.47
                            5      5.83    45.65
                            6      6.00    32.92
                            7      6.41    29.97
            Average math test scores under the influence of LSD           5
                                             08:58 Thursday, April 22, 2021

                                     x

                     1         2         3         4         5
                     6         7         8         9        10
                    11        12        13        14        15
                    16        17        18        19        20

                                     y

                                   11        12
                                   16        17
            Average math test scores under the influence of LSD           6
                                             08:58 Thursday, April 22, 2021

                     Obs    _TYPE_    _FREQ_       x

                      1        0        466     233168
            Average math test scores under the influence of LSD           7
                                             08:58 Thursday, April 22, 2021

                    Obs     name     status     present

                     1     Edison    nice        toy   
                     2     Alex      naughty     coal  
                     3     Susan                 toy   
                     4     Ryan      neutral     toy   </code></pre>
<p>However, R’s environment feature and lexical scoping is not common to many other programming languages.
When values are passed into the function as arguments, the behavior in SAS deviates from the equivalent behavior in R. In SAS, arguments to functions are passed by <strong>reference</strong>.</p>
<p>An argument that is passed <strong>by value</strong> makes a copy of the value (to a new memory location) for the local function scope (this is what R does).</p>
<p>When an argument is passed <strong>by reference</strong>, the <em>address</em> of the argument is passed in instead<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>.
This is faster and more efficient (because you aren’t making a new copy of the data), but it does mean that changes inside the function persist outside that function. <a href="https://blogs.sas.com/content/iml/2011/02/07/passing-arguments-by-reference-an-efficient-choice.html">This can cause problems when reusing modules</a>.</p>
<details>
<summary>
Argument passing in SAS
</summary>
<p>If we make a slight modification to <code>myfun(a, b)</code>, though, we see some interesting behavior in SAS that we wouldn’t see in the equivalent R program.</p>
<pre class="saslog"><code>2          PROC IML;
NOTE: IML Ready
WARNING: IML is now in syntax-check-only mode due to errors in previous 
         steps. No statements will be executed.
3          a = 3;
4          
5          start myfun(a, b);
6            a = a + 2;
7            return a + b;
8          finish;
NOTE: Module MYFUN defined.
9          
10         b = a;
11         
12         r1 = myfun(5, 6);
13         
14         c = a;
15         
16         r2 = myfun(a, 3);
17         
18         d = a;
19         
20         print b[label=&quot;a before r1&quot;] r1 c[label=&quot;a after r1&quot;] r2
20       ! d[label=&quot;a after r2&quot;];
21         quit;
NOTE: Exiting IML.
NOTE: PROCEDURE IML used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

ERROR: Errors printed on pages 4,5,7.
                              The SAS System                              1
                                             08:58 Thursday, April 22, 2021

                       --------- List = ick---------

                                  Item 1

                                  olives

                                  Item 2

                                  sausage

                                  Item 3

                                 anchovies

                      --------- List = crust---------

                                  Item 1

                                  flour 

                                  Item 2

                                  yeast 

                                  Item 3

                                  salt  

                                  Item 4

                                  water 

                 --------- List = yummy_toppings---------

                                  Item 1

                                  asiago

                                  Item 2

                                  fontina


                              The SAS System                              2
                                             08:58 Thursday, April 22, 2021

                                  Item 3

                                blue cheese

                                  Item 4

                                  bacon 

                                  Item 5

                                 scallions
            Average math test scores under the influence of LSD           3
                                             08:58 Thursday, April 22, 2021

                          The DATASETS Procedure

Data Set Name        WORK.MATHLSD                  Observations          7 
Member Type          DATA                          Variables             2 
Engine               V9                            Indexes               0 
Created              04/22/2021 08:58:40           Observation Length    16
Last Modified        04/22/2021 08:58:40           Deleted Observations  0 
Protection                                         Compressed            NO
Data Set Type                                      Sorted                NO
Label                                                                      
Data Representation  SOLARIS_X86_64,                                       
                     LINUX_X86_64, ALPHA_TRU64,                            
                     LINUX_IA64                                            
Encoding             latin1  Western (ISO)                                 

                     Engine/Host Dependent Information

Data Set Page Size          65536                                          
Number of Data Set Pages    1                                              
First Data Page             1                                              
Max Obs per Page            4061                                           
Obs in First Data Page      7                                              
Number of Data Set Repairs  0                                              
Filename                    /tmp/SAS_work523A0004A9B8_                     
                            silicon/mathlsd.sas7bdat                       
Release Created             9.0401M6                                       
Host Created                Linux                                          
Inode Number                11278101                                       
Access Permission           rw-rw-r--                                      
Owner Name                  susan                                          
File Size                   128KB                                          
File Size (bytes)           131072                                         

                Alphabetic List of Variables and Attributes
 
                       #    Variable    Type    Len

                       1    Drugs       Num       8
                       2    Score       Num       8
            Average math test scores under the influence of LSD           4
                                             08:58 Thursday, April 22, 2021

                           Obs    Drugs    Score

                            1      1.17    78.93
                            2      2.97    58.20
                            3      3.26    67.47
                            4      4.69    37.47
                            5      5.83    45.65
                            6      6.00    32.92
                            7      6.41    29.97
            Average math test scores under the influence of LSD           5
                                             08:58 Thursday, April 22, 2021

                                     x

                     1         2         3         4         5
                     6         7         8         9        10
                    11        12        13        14        15
                    16        17        18        19        20

                                     y

                                   11        12
                                   16        17
            Average math test scores under the influence of LSD           6
                                             08:58 Thursday, April 22, 2021

                     Obs    _TYPE_    _FREQ_       x

                      1        0        466     233168
            Average math test scores under the influence of LSD           7
                                             08:58 Thursday, April 22, 2021

                    Obs     name     status     present

                     1     Edison    nice        toy   
                     2     Alex      naughty     coal  
                     3     Susan                 toy   
                     4     Ryan      neutral     toy   </code></pre>
<div class="note">
<p>In SAS, be sure that if you are using a logical operator AND, <code>&amp;</code>, you put spaces around it (e.g. <code>&amp;</code>) - <code>&amp;var2</code> is a way to specify that you are passing an argument (<code>var2</code>) by reference, and SAS can get confused and issue weird warnings if you actually intended this to be a logical statement of <code>var1 &amp;var2</code>.</p>
<p>I ran across this once and it thoroughly confused me until I remembered that &amp;var can mean “pass by reference” in some languages.</p>
</div>
<details>
<summary>
Another example of SAS passing arguments by reference (and the unexpected effects that can have on a program’s state)
</summary>
<pre class="saslog"><code>2          PROC IML;
NOTE: IML Ready
WARNING: IML is now in syntax-check-only mode due to errors in previous 
         steps. No statements will be executed.
3          start myfun(x);
4            call sort(x, 1);
4        !                    /* sort the values */
5            return (cusum(x));
5        !                      /* cusum() = cumulative sum */
6          finish;
NOTE: Module MYFUN defined.
7          
8          y = {3, 1, 4, 1, 5, 9, 2, 6, 5, 4};
9          z = y;
10         
11         print y[label=&quot;y before function is called&quot;];
12         
13         cs = myfun(y);
14         
15         print z[label=&quot;original y&quot;]
16               y[label=&quot;y after function is called&quot;]
17               cs[label=&quot;cumulative sum of sorted y&quot;];
18         
19         quit;
NOTE: Exiting IML.
NOTE: PROCEDURE IML used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

20         

ERROR: Errors printed on pages 4,5,7.
                              The SAS System                              1
                                             08:58 Thursday, April 22, 2021

                       --------- List = ick---------

                                  Item 1

                                  olives

                                  Item 2

                                  sausage

                                  Item 3

                                 anchovies

                      --------- List = crust---------

                                  Item 1

                                  flour 

                                  Item 2

                                  yeast 

                                  Item 3

                                  salt  

                                  Item 4

                                  water 

                 --------- List = yummy_toppings---------

                                  Item 1

                                  asiago

                                  Item 2

                                  fontina


                              The SAS System                              2
                                             08:58 Thursday, April 22, 2021

                                  Item 3

                                blue cheese

                                  Item 4

                                  bacon 

                                  Item 5

                                 scallions
            Average math test scores under the influence of LSD           3
                                             08:58 Thursday, April 22, 2021

                          The DATASETS Procedure

Data Set Name        WORK.MATHLSD                  Observations          7 
Member Type          DATA                          Variables             2 
Engine               V9                            Indexes               0 
Created              04/22/2021 08:58:40           Observation Length    16
Last Modified        04/22/2021 08:58:40           Deleted Observations  0 
Protection                                         Compressed            NO
Data Set Type                                      Sorted                NO
Label                                                                      
Data Representation  SOLARIS_X86_64,                                       
                     LINUX_X86_64, ALPHA_TRU64,                            
                     LINUX_IA64                                            
Encoding             latin1  Western (ISO)                                 

                     Engine/Host Dependent Information

Data Set Page Size          65536                                          
Number of Data Set Pages    1                                              
First Data Page             1                                              
Max Obs per Page            4061                                           
Obs in First Data Page      7                                              
Number of Data Set Repairs  0                                              
Filename                    /tmp/SAS_workB89F0004AA1B_                     
                            silicon/mathlsd.sas7bdat                       
Release Created             9.0401M6                                       
Host Created                Linux                                          
Inode Number                11278101                                       
Access Permission           rw-rw-r--                                      
Owner Name                  susan                                          
File Size                   128KB                                          
File Size (bytes)           131072                                         

                Alphabetic List of Variables and Attributes
 
                       #    Variable    Type    Len

                       1    Drugs       Num       8
                       2    Score       Num       8
            Average math test scores under the influence of LSD           4
                                             08:58 Thursday, April 22, 2021

                           Obs    Drugs    Score

                            1      1.17    78.93
                            2      2.97    58.20
                            3      3.26    67.47
                            4      4.69    37.47
                            5      5.83    45.65
                            6      6.00    32.92
                            7      6.41    29.97
            Average math test scores under the influence of LSD           5
                                             08:58 Thursday, April 22, 2021

                                     x

                     1         2         3         4         5
                     6         7         8         9        10
                    11        12        13        14        15
                    16        17        18        19        20

                                     y

                                   11        12
                                   16        17
            Average math test scores under the influence of LSD           6
                                             08:58 Thursday, April 22, 2021

                     Obs    _TYPE_    _FREQ_       x

                      1        0        466     233168
            Average math test scores under the influence of LSD           7
                                             08:58 Thursday, April 22, 2021

                    Obs     name     status     present

                     1     Edison    nice        toy   
                     2     Alex      naughty     coal  
                     3     Susan                 toy   
                     4     Ryan      neutral     toy   </code></pre>
<p>Because arguments in SAS are passed by reference, you can “trick” a function into returning multiple values by passing the variables in as arguments to the function, changing their values in the function, and returning. This is not necessarily a good practice - it can make code very difficult to debug, and may lead to non-obvious dependencies - but for short, simple programs, you can probably get away with it.</p>
<pre class="saslog"><code>2          PROC IML;
NOTE: IML Ready
WARNING: IML is now in syntax-check-only mode due to errors in previous 
         steps. No statements will be executed.
3            start getDescriptive(Mean, SD, /* output args */
4                                   x /* input arg */);
5              Mean = x[:];
5        !                  /* this is shorthand for compute the mean of
5        ! the column */
6              SD = sqrt( ssq(x - Mean)/(nrow(x) - 1));
7            finish;
NOTE: Module GETDESCRIPTIVE defined.
8          
9          m = 0;
10         s = 0;
11         y = {3, 1, 4, 1, 5, 9, 2, 6, 5, 4};
12         
13         run GetDescriptive(m, s, y);
14         print m s;
15         
16         
17         quit;
NOTE: Exiting IML.
NOTE: PROCEDURE IML used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

18         

ERROR: Errors printed on pages 4,5,7.
                              The SAS System                              1
                                             08:58 Thursday, April 22, 2021

                       --------- List = ick---------

                                  Item 1

                                  olives

                                  Item 2

                                  sausage

                                  Item 3

                                 anchovies

                      --------- List = crust---------

                                  Item 1

                                  flour 

                                  Item 2

                                  yeast 

                                  Item 3

                                  salt  

                                  Item 4

                                  water 

                 --------- List = yummy_toppings---------

                                  Item 1

                                  asiago

                                  Item 2

                                  fontina


                              The SAS System                              2
                                             08:58 Thursday, April 22, 2021

                                  Item 3

                                blue cheese

                                  Item 4

                                  bacon 

                                  Item 5

                                 scallions
            Average math test scores under the influence of LSD           3
                                             08:58 Thursday, April 22, 2021

                          The DATASETS Procedure

Data Set Name        WORK.MATHLSD                  Observations          7 
Member Type          DATA                          Variables             2 
Engine               V9                            Indexes               0 
Created              04/22/2021 08:58:41           Observation Length    16
Last Modified        04/22/2021 08:58:41           Deleted Observations  0 
Protection                                         Compressed            NO
Data Set Type                                      Sorted                NO
Label                                                                      
Data Representation  SOLARIS_X86_64,                                       
                     LINUX_X86_64, ALPHA_TRU64,                            
                     LINUX_IA64                                            
Encoding             latin1  Western (ISO)                                 

                     Engine/Host Dependent Information

Data Set Page Size          65536                                          
Number of Data Set Pages    1                                              
First Data Page             1                                              
Max Obs per Page            4061                                           
Obs in First Data Page      7                                              
Number of Data Set Repairs  0                                              
Filename                    /tmp/SAS_workD97F0004AA81_                     
                            silicon/mathlsd.sas7bdat                       
Release Created             9.0401M6                                       
Host Created                Linux                                          
Inode Number                11278101                                       
Access Permission           rw-rw-r--                                      
Owner Name                  susan                                          
File Size                   128KB                                          
File Size (bytes)           131072                                         

                Alphabetic List of Variables and Attributes
 
                       #    Variable    Type    Len

                       1    Drugs       Num       8
                       2    Score       Num       8
            Average math test scores under the influence of LSD           4
                                             08:58 Thursday, April 22, 2021

                           Obs    Drugs    Score

                            1      1.17    78.93
                            2      2.97    58.20
                            3      3.26    67.47
                            4      4.69    37.47
                            5      5.83    45.65
                            6      6.00    32.92
                            7      6.41    29.97
            Average math test scores under the influence of LSD           5
                                             08:58 Thursday, April 22, 2021

                                     x

                     1         2         3         4         5
                     6         7         8         9        10
                    11        12        13        14        15
                    16        17        18        19        20

                                     y

                                   11        12
                                   16        17
            Average math test scores under the influence of LSD           6
                                             08:58 Thursday, April 22, 2021

                     Obs    _TYPE_    _FREQ_       x

                      1        0        466     233168
            Average math test scores under the influence of LSD           7
                                             08:58 Thursday, April 22, 2021

                    Obs     name     status     present

                     1     Edison    nice        toy   
                     2     Alex      naughty     coal  
                     3     Susan                 toy   
                     4     Ryan      neutral     toy   </code></pre>
If you want to avoid any of these side-effects of SAS’s pass-by-reference behavior, you can very easily do so: just don’t write any modules that modify input arguments. Always modify a copy of the variable instead.
</details>
</details>
<details>
<summary>
Argument passing in R
</summary>
<p>In R, variables inside a function don’t modify variables which are outside a function (generally speaking). In SAS, this is not necessarily the case. In the first call to myfun(), we pass in two numerical arguments, and we see that even though the value of a changes inside the function, that change doesn’t affect the variable defined outside of the function. In the second call to myfun(), we pass a variable in as an argument, and we see that the variable changes after the function’s execution! In the R chunk (below), you can see that the behavior of what is essentially the same code is different.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="organization.html#cb105-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-2"><a href="organization.html#cb105-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb105-3"><a href="organization.html#cb105-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-4"><a href="organization.html#cb105-4" aria-hidden="true" tabindex="-1"></a>myfun <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb105-5"><a href="organization.html#cb105-5" aria-hidden="true" tabindex="-1"></a>  a <span class="ot">&lt;-</span> a <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb105-6"><a href="organization.html#cb105-6" aria-hidden="true" tabindex="-1"></a>  a <span class="sc">+</span> b</span>
<span id="cb105-7"><a href="organization.html#cb105-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb105-8"><a href="organization.html#cb105-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-9"><a href="organization.html#cb105-9" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb105-10"><a href="organization.html#cb105-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3</span></span>
<span id="cb105-11"><a href="organization.html#cb105-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-12"><a href="organization.html#cb105-12" aria-hidden="true" tabindex="-1"></a><span class="fu">myfun</span>(<span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb105-13"><a href="organization.html#cb105-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">13</span></span>
<span id="cb105-14"><a href="organization.html#cb105-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-15"><a href="organization.html#cb105-15" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb105-16"><a href="organization.html#cb105-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3</span></span>
<span id="cb105-17"><a href="organization.html#cb105-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-18"><a href="organization.html#cb105-18" aria-hidden="true" tabindex="-1"></a><span class="fu">myfun</span>(a, <span class="dv">3</span>) </span>
<span id="cb105-19"><a href="organization.html#cb105-19" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">8</span></span>
<span id="cb105-20"><a href="organization.html#cb105-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-21"><a href="organization.html#cb105-21" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb105-22"><a href="organization.html#cb105-22" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3</span></span></code></pre></div>
</details>
<div id="try-it-out-8" class="section level4 unnumbered tryitout">
<h4>Try it out</h4>
<p>Can you predict what the output of this chunk will be?</p>
<pre><code>f &lt;- function(x) {
  f &lt;- function(x) {
    f &lt;- function(x) {
      x ^ 2
    }
    f(x) + 1
  }
  f(x) * 2
}
f(10)</code></pre>
<p>Run it - were you right?</p>
<p>What happens when you run a similar program in SAS? (I only nested two functions this time, but you get the idea)</p>
<pre><code>proc IML;
  start f(x);

    start f(x);
      return x**x;
    finish;

    return f(x)+1;
  finish;
quit;</code></pre>
<details>
<summary>
Solution
</summary>
<p>Working through the R program: This gets much less confusing if you rename the functions following R’s scoping rules.</p>
<pre><code>f &lt;- function(x) {
  f1 &lt;- function(x) { # because inside of f(), the new definition will dominate 
    f2 &lt;- function(x) { # because inside of f1(), the new definition will dominate
      x ^ 2
    }
    f2(x) + 1
  }
  f1(x) * 2
}
f(10)</code></pre>
<p>Once this has been renamed, it is relatively easy to write out as a series of mathematical substitutions:</p>
<p><span class="math display">\[f(10) = f1(10) * 2 = (f2(10) + 1) * 2 = (10^2 + 1)*2 = 202\]</span></p>
<p>Running the similar program in SAS results in SAS complaining about a recursive function definition.</p>
</details>
<p>What will this SAS program output?</p>
<pre class="sashtmllog"><code>6          proc IML;
NOTE: IML Ready
WARNING: IML is now in syntax-check-only mode due to errors in previous 
         steps. No statements will be executed.
7          
8          start funwithSAS(x, y);
9            a = x;
10           x = x + 3;
11           return x*y;
12         finish;
NOTE: Module FUNWITHSAS defined.
13         
14         a = 0;
15         res1 = funwithSAS(a, 5);
16         a1 = a;
17         
18         x = 3;
19         res2 = funwithSAS(x, 5);
20         a2 = a;
21         x2 = x;
22         
23         y = 3;
24         res3 = funwithSAS(x, y);
25         
26         /* print res1 a1 res2 a2 x2 res3 a x y; */ /* uncomment this
26       ! when you&#39;re ready */
27         
28         quit;
NOTE: Exiting IML.
NOTE: PROCEDURE IML used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

29         

ERROR: Errors printed on pages 4,5,7.</code></pre>
<details>
<summary>
Solution
</summary>
<p>This is easiest if we step through the program and list what is passed around inside and outside of the function evaluation.</p>
<pre><code>a = 0
res1 = ...? 
(inside funwithsas res1) x = (location of a), y = 5
(inside funwithsas res1) a = x = (location of a), x = (location of a) + 3 = 3, so (location of a) = 3 and x = 3.
res1 returns x = 3 * y = 5 = 15

a1 = 3
res2 = ...?
(inside funwithsas res2) x = (location of x), y = 5
(inside funwithsas res2) a = (location of x), x = (location of x) + 3 = 6 (a outside the function is unaffected because a is not a parameter)
res2 returns x = 6 * y = 5 = 30

a2 = 3
x2 = 6

y = 3
res3 = ...?
(inside funwithsas res3) x = (location of x), y = (location of y)
(inside funwithsas res3) a = (location of x), x = (location of x) + 3 = 9 (a outside the function is unaffected; y is unchanged)
res3 returns x = 9 * y = 3 = 27

at this point, x = 9 and y = 3.

So the output is res1 = 15 a1 = 3 res2 = 30 a2 = 3 x2 = 6 res3 = 27 a = 3 x = 9 y = 3</code></pre>
The trick to this problem is to realize that inside of the function, when a variable is passed in (by reference) the thing that is assigned is the pointer to the value in memory where the original variable lives. So when a is passed in as x, x is assigned (location of a), which is then assigned to the local copy of a. So both variables now point at the outside (a), and any changes to x also affect both a and the local copy of a.
</details>
</div>
</div>
<div id="the-pipe" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> The Pipe</h3>
<div class="note">
<p>You do not need to understand the collapsed section below. If you’re feeling comfortable with the material, go ahead and read it now. I’ve left it in the functions section, because it’s a topic relating to functions, but it’s not essential to understand to use R (even at an advanced level)<a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a>.</p>
</div>
<details>
<summary>
Infix operators
</summary>
<p>Most functions take arguments written after the function name. Can you think of any functions which work differently?</p>
<p><strong>Infix</strong> functions are functions that take arguments on both sides of the function name. Say, a + b: technically, a and b are arguments to the function +, so we could think of this as +(a, b).</p>
<p>R has a number of infix functions, but you can also create your own. User-defined infix functions start and end with %. So %&gt;%, %in%, %dosomething% would all be valid infix operators. To define one, you need to enclose the name in back-ticks (`).</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="organization.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">%dosomething%</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb111-2"><a href="organization.html#cb111-2" aria-hidden="true" tabindex="-1"></a>  a<span class="sc">^</span>b <span class="sc">-</span> a <span class="sc">+</span> b</span>
<span id="cb111-3"><a href="organization.html#cb111-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb111-4"><a href="organization.html#cb111-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-5"><a href="organization.html#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">%dosomething%</span> <span class="dv">4</span></span>
<span id="cb111-6"><a href="organization.html#cb111-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">82</span></span></code></pre></div>
<p>You can also call default infix operators using this syntax: `+`(3, 4) = 7</p>
One of the most useful infix operators is the pipe, <code>%&gt;%</code>, which is a part of the <code>magrittr</code> library and is commonly included in other packages, such as <code>dplyr</code>, and <code>tidyr</code> (we will talk about packages later in this chapter, but pipes are useful to discuss now, so roll with it for a few minutes).
</details>
<p>The one part of this section that is important to at least be able to use is the pipe: <code>%&gt;%</code>.</p>
<div class="learn-more">
<p>There is an <a href="https://r4ds.had.co.nz/pipes.html">entire chapter dedicated to discussing the pipe in R4DS</a>, including a discussion of when not to use the pipe.</p>
</div>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="organization.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb112-2"><a href="organization.html#cb112-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-3"><a href="organization.html#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">%&gt;%</span> <span class="fu">exp</span>()</span>
<span id="cb112-4"><a href="organization.html#cb112-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">20.08554</span></span>
<span id="cb112-5"><a href="organization.html#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="dv">3</span>)</span>
<span id="cb112-6"><a href="organization.html#cb112-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">20.08554</span></span></code></pre></div>
<p>The pipe takes the left hand side and a function, and puts the left hand side as an argument to the function on the right hand side. It doesn’t sound very impressive, but it allows you to do a very cool thing: “chain” operations.</p>
<p>Consider 3 functions:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="organization.html#cb113-1" aria-hidden="true" tabindex="-1"></a>f1 <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">y =</span> <span class="dv">3</span>) {</span>
<span id="cb113-2"><a href="organization.html#cb113-2" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">*</span> y</span>
<span id="cb113-3"><a href="organization.html#cb113-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb113-4"><a href="organization.html#cb113-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-5"><a href="organization.html#cb113-5" aria-hidden="true" tabindex="-1"></a>f2 <span class="ot">&lt;-</span> <span class="cf">function</span>(z) {</span>
<span id="cb113-6"><a href="organization.html#cb113-6" aria-hidden="true" tabindex="-1"></a>  z<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb113-7"><a href="organization.html#cb113-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb113-8"><a href="organization.html#cb113-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-9"><a href="organization.html#cb113-9" aria-hidden="true" tabindex="-1"></a>f3 <span class="ot">&lt;-</span> <span class="cf">function</span>(z2) {</span>
<span id="cb113-10"><a href="organization.html#cb113-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log10</span>(z2)</span>
<span id="cb113-11"><a href="organization.html#cb113-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Normally, you’d write <code>f3(f2(f1(4)))</code>, which you have to read from the inside to the outside if you want to describe what this function call is doing. With pipes, you can write the same operation as:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="organization.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="sc">%&gt;%</span> <span class="fu">f1</span>() <span class="sc">%&gt;%</span> <span class="fu">f2</span>() <span class="sc">%&gt;%</span> <span class="fu">f3</span>()</span>
<span id="cb114-2"><a href="organization.html#cb114-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">2.158362</span></span></code></pre></div>
<p>This is much simpler to read - it’s like a recipe. “Take 4, do f1, then f2, then f3.”</p>
<p>You don’t need to know how to define your own infix operators, but you will want to become familiar with the pipe. It’s a central component of writing “tidy” R code. Incidentally, SAS also has a use for the pipe: <a href="https://blogs.sas.com/content/sgf/2016/03/11/using-a-pipe-to-return-the-output-of-an-operating-system-command-to-sas-software/">leveraging the operating system to work with files</a>. In SAS, you just use the keyword <code>pipe</code>, which is hopefully pretty obvious.</p>
</div>
</div>
<div id="procs-and-data-steps" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Procs and Data steps</h2>
<p>In R, the primary unit of code is a function, and nearly every operation in R is a function call, but the functions themselves are malleable and can be easily re-written. SAS is not that flexible - its procedures have been checked and double-checked and maintained for 30 years (in many cases). That level of validation explains its popularity in e.g. the pharmaceutical industry or government, but it does lead to a certain rigidity in the “flow” of a SAS data analysis. Personally, I find that using SAS generally doesn’t require much thought, but I quickly get frustrated when it’s not possible to do the exact thing I want to do in a direct or relatively easy way.</p>
<p>The primary units of code in SAS are “steps,” and come in two main flavors: data steps, and proc steps. Data steps are written by the user and customized extensively to the dataset you’re creating or reading in. Proc steps, on the other hand, execute mainly pre-defined procedures that are built into SAS. Thus far, you’ve seen DATA steps and PROC PRINT and IML. In the next module, you’ll see PROC IMPORT, PROC MEANS, PROC CORR, PROC SUMMARY, PROC FREQ, and PROC UNIVARIATE.</p>
<p>There is a handy <a href="https://stats.idre.ucla.edu/sas/library/sas-libraryoverview-of-the-sas-language/">overview of the SAS language</a> that may be useful in understanding the code that you’ve only been reading and copying up to this point.</p>
<p>The bare SAS procedure with no options looks like this:</p>
<pre><code>PROC MEANS;
RUN;</code></pre>
<p>By default, SAS will use the last dataset created to run this procedure.</p>
<details>
<summary>
SAS procedures can also be run with options that modify the statement.
</summary>
<pre class="sashtmllog"><code>6          PROC PRINT DATA=SASHELP.CARS (obs=10);
7          RUN;

NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

8          
9          PROC MEANS DATA=SASHELP.CARS;
10         RUN;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

ERROR: Errors printed on pages 4,5,7.</code></pre>
In the code above, both <code>DATA=SASHELP.CARS</code> and <code>(obs=10)</code> are options that modify their respective statements.
</details>
<details>
<summary>
Some procs also support additional statements: for instance, we can use the VAR statement to tell SAS which variables we want to work with.
</summary>
<pre class="sashtmllog"><code>

6          PROC MEANS DATA=SASHELP.CARS;
7            VAR msrp cylinders;
8          RUN;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

ERROR: Errors printed on pages 4,5,7.</code></pre>
</details>
<details>
<summary>
Another statement, CLASS, tells SAS to run the procedure for each level of a named categorical variable.
</summary>
<pre class="sashtmllog"><code>

6          PROC MEANS DATA=SASHELP.CARS;
7            CLASS type;
8            VAR msrp cylinders;
9          RUN;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

ERROR: Errors printed on pages 4,5,7.</code></pre>
</details>
<p>Some statements may have additional options that further modify the statement.</p>
<p>The SAS documentation contains full lists of all statements (and all options for those statements).</p>
<div id="try-it-out-9" class="section level3 unnumbered tryitout">
<h3>Try It Out</h3>
<p>Take a look at the <a href="https://documentation.sas.com/?docsetId=lestmtsref&amp;docsetTarget=p0gct6ariiecuhn15jkq8pzfzgef.htm&amp;docsetVersion=9.4&amp;locale=en">Dictionary of SAS DATA step statements</a>. Find the RENAME statement and read up on its syntax. Can you rename the variable msrp in the SASHELP.CARS dataset?</p>
<pre><code>DATA tmp; /* Create a temporary dataset */
  SET SASHELP.CARS; /* use the CARS data */
  
  /* Your RENAME statement goes here */

RUN;</code></pre>
</div>
<p>There is an overview of many common SAS procedures <a href="https://stats.idre.ucla.edu/sas/library/sas-libraryoverview-of-sas-procedures/">here</a>.</p>
</div>
<div id="scripts" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Scripts</h2>
<p>Up until this point, you may have been writing code in an R Studio or SAS text editor window, or, you may have been typing commands into the command line without preserving them in a separate file. You might even have been working in R markdown documents, where you had code and non-code chunks of the file.</p>
<p>A <strong>script</strong> is a file which contains only code and comments. It is intended to run from start to finish, and usually completes one or more tasks - for instance, cleaning your data, or loading a series of custom functions into your R environment. Scripts are useful because they preserve code so that it can be re-run… and in some cases, they can even be re-run autonomously - I have several scripts which automatically run at specific times every day to complete various tasks (scraping data off the internet, mostly).</p>
<p>I find that when doing data analysis, it is often easier to write a script as opposed to working in R markdown or typing commands into the console. Scripts are a record of what I’ve done, and ensure that commands are executed in the right order. As with any tool, it is important to know where to use the tool and where the tool is usually not the best option.</p>
<p>You can source (run) an R script using the <code>source()</code> command with the file path of the script as the argument.</p>
<p>Scripts in R end in <code>.r</code> or <code>.R</code>, while scripts in SAS end in <code>.sas</code>.</p>
<p>Scripts can be run in one of (at least) two modes: batch mode, or interactive mode. In batch mode, the entire script is run without human intervention or monitoring. This is useful for repetitive jobs – for instance, to record the weather at 6h intervals throughout the day. In interactive mode, scripts may be run line-by-line or block-wise, with small tweaks made to the code as you proceed through the file. I find that in some cases, what starts out as an interactive mode script can become a batch script as I work the kinks out.</p>
<p>If you ever need to use the high-performance computing resources on campus, you will need to write code to run in batch mode, because these jobs are generally not friendly to interactive programming.</p>
<div id="try-it-out-10" class="section level3 unnumbered tryitout">
<h3>Try it out</h3>
<p>I maintain a list of packages that I find to be useful so that when I install R on a new machine (or update R), I don’t have to spend 3 weeks realizing that I need to install X package. Instead of many repeated 5 minute pauses for package installation, I can just let this script run once and walk away.</p>
<p>I’ve pared down my list of packages a bit for this class (you don’t need the packages for analysis of 3D bullet scan data, for instance), but this step should help populate your R installation with a few new packages.</p>
<p>Read the script (located <a href="code/03_setup.R">here</a>) and try to understand what it is doing. Once you think you understand what it is doing, run the following command to run the script and install the packages on your machine. Were you right?</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="organization.html#cb120-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://raw.githubusercontent.com/srvanderplas/unl-stat850/master/code/03_setup.R&quot;</span></span>
<span id="cb120-2"><a href="organization.html#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(url)</span></code></pre></div>
</div>
<div id="try-it-out-sas" class="section level3 unnumbered tryitout">
<h3>Try it out (SAS)</h3>
<p>Use <a href="https://blogs.sas.com/content/iml/2016/12/12/koch-snowflake.html">this blog post</a> to create a SAS script that draws a Koch Snowflake in SAS. Save it as “Snowflake.SAS” and open the file in SAS to run it.</p>
<details>
<summary>
Snowflake.SAS
</summary>
<pre class="sashtml"><code>

6          PROC IML;
NOTE: IML Ready
WARNING: IML is now in syntax-check-only mode due to errors in previous 
         steps. No statements will be executed.
7            start KochDivide(A, E);
7        !                                              /* (x,y) coords of
7        ! endpoints */
8               segs = j(5, 2, .);
8        !                                              /* matrix to hold 4
8        !  shorter segs */
9               v = (E-A) / 3;
9        !                                              /* vector 1/3 as
9        ! long as orig */
10              segs[{1 2 4 5}, ] = A + v @ T(0:3);
10       !                                              /* endpoints of new
10       !  segs */
11              /* Now compute middle point. Use ATAN2 to find direction
11       ! angle. */
12              theta = -constant(&quot;pi&quot;)/3 + atan2(v[2], v[1]);
12       !                                                     /* change
12       ! angle by pi/3 */
13              w = cos(theta) || sin(theta);
13       !                                              /* vector to middle
13       !  point */
14              segs[3,] = segs[2,] + norm(v)*w;
15              return segs;
16           finish;
NOTE: Module KOCHDIVIDE defined.
17         
18         
19           /* create Koch Snowflake from an equilateral triangle */
20           start KochPoly(P0, iters=5);
21             P = P0;
22             do j=1 to iters;
23                N = nrow(P) - 1;
23       !                                     /* old number of segments */
24                newP = j(4*N+1, 2);
24       !                                     /* new number of segments +
24       ! 1 */
25                do i=1 to N;
25       !                                     /* for each segment... */
26                   idx = (4*i-3):(4*i+1);
26       !                                                     /* rows for
26       ! 4 new segments */
27                   newP[idx, ] = KochDivide(P[i,], P[i+1,]);
27       !                                                     /* generate
27       ! new segments */
28                end;
29                P = newP;
29       !                                     /* update polygon and
29       ! iterate */
30             end;
31             return P;
32           finish;
NOTE: Module KOCHPOLY defined.
33         
34           /* create equilateral triangle as base for snowflake */
35           pi = constant(&quot;pi&quot;);
36           angles = -pi/6 // pi/2 // 7*pi/6;
36       !                                      /* angles for equilateral
36       ! triangle */
37           P = cos(angles) || sin(angles);
37       !                                      /* vertices of equilateral
37       ! triangle */
38           P = P // P[1,];
38       !                                      /* append first vertex to
38       ! close triangle */
39           K = KochPoly(P);
39       !                                      /* create the Koch
39       ! snowflake */
40         
41           S = j(nrow(K), 3, 1);
41       !                              /* add ID variable with constant
41       ! value 1 */
42           S[ ,1:2] = K;
43           create Koch from S[colname={X Y ID}];
44           append from S;
45           close;
46         
47         
48           /* test KochDivide on line segment from (0,0) to (1,0) */
49           s = KochDivide({0 0}, {1 0});
50           title  &quot;Fundamental Step in the Koch Snowflake Construction&quot;;
51           ods graphics / width=600  height=300;
52           call series(s[,1], s[,2]) procopt=&quot;aspect=0.333&quot;;
53         
54         QUIT;
NOTE: Exiting IML.
NOTE: PROCEDURE IML used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

55         
56         ods graphics / width=400px height=400px;
57         footnote justify=Center &quot;Koch Snowflake&quot;;
58         proc sgplot data=Koch;
ERROR: File WORK.KOCH.DATA does not exist.
59            styleattrs wallcolor=CXD6EAF8;               /* light blue */
60            polygon x=x y=y ID=ID / outline fill fillattrs=(color=white);
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
61            xaxis display=none;
62            yaxis display=none;
63         run;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE SGPLOT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

ERROR: Errors printed on pages 4,5,7,11.</code></pre>
<pre class="sashtml"><code>6          dm log &quot;clear&quot;;
7          dm output &quot;clear&quot;;
8          ods html close;
9          ods html;
NOTE: Writing HTML Body file: sashtml3.htm

ERROR: Errors printed on pages 4,5,7,11.</code></pre>
</details>
</div>
</div>
<div id="packages" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Packages</h2>
<p>Both SAS and R have systems for extending the base system/language with additional functionality. In R, these extensions are called packages. In SAS, language extensions are called modules (for things sold by SAS), macros (for functions distributed by users), and in packages (which exist but are rarely used).<a href="#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a></p>
<details>
<summary>
SAS packages
</summary>
<p>In SAS, there are packages of code that encapsulate scripts. However, unlike R (and many other languages), there is no centralized repository for SAS packages. Papers may include SAS packages to demonstrate new methods, and other packages may be found on GitHub or various SAS forums.</p>
A more common way of distributing code in SAS seems to be through the use of single-file macros. (Even longtime SAS users don’t necessarily know about the package system). These macros often need to be slightly customized to your environment (or you need to customize your environment to match the assumptions made in the macro, which can be harder).
</details>
<details>
<summary>
R packages
</summary>
<p>In R, there are two main sources for packages: CRAN (the Comprehensive R Archive Network) (and related archives, such as MRAN, which is Microsoft’s version of CRAN) and github. R packages published on CRAN go through a basic verification process that makes sure that the package meets certain <a href="https://cran.r-project.org/">standards</a> (for instance, packages must have proper dependencies specified, cannot conflict with previous package names, must have a software license, and cannot contain malicious code). Note that CRAN does not check the packages for statistical correctness!</p>
<p>On github, packages go through less verification. Many packages use a system where the version in development is on github and available for installation, but the version on CRAN is considered “stable.” Sometimes, packages are never put on CRAN: I contribute to several packages which are too large for CRAN, and it’s not worth the hassle to get an exception or figure out a workaround.</p>
<p>Currently, the CRAN package repository features 1.7471^{4} available packages. How do you navigate them to find the one you need? Sometimes, the <a href="https://cran.r-project.org/web/views/">CRAN Task Views</a> may be helpful - for instance, if you want to see all of the packages which are useful for Meta-Analysis, Finance, Bayesian statistics, etc. Other times, it’s useful to let Google help you navigate: searching for “R CRAN” + “what you want the package to do” can often narrow things down (I recommend adding CRAN in because Google results for “R” are not particularly useful.)</p>
<p>Once you find and install a package (<code>install.packages()</code> for CRAN packages, <code>devtools::install_github()</code> for GitHub packages), you have to figure out how to use it. Many R packages come with <strong>vignettes</strong>, which are short articles that demonstrate how a package is used.
You can browse the available vignettes using <code>browseVignettes()</code> (if you provide a package name as an argument, you will get only vignettes from that package).</p>
Another way to get help on a package is to use <code>?&lt;package name&gt;</code>, e.g. <code>?ggplot2</code>. That will take you to the main package description page, and there are often links to documentation. At the bottom of the description page, you can click on a link to get to the Index, which is a list of all functions that are provided in that package. From there, you can find the documentation for each function in the package.
</details>
<div id="try-it-out-11" class="section level3 unnumbered tryitout">
<h3>Try it out</h3>
<p>Install the R package <code>tibble</code> if it is not already installed. Pull up the vignettes for the <code>tibble</code> package, and read about tibbles. What is the equivalent base R object? How do tibbles differ from that object?</p>
<p>Get to the package index for the <code>tibble</code> package, either by navigating through the Packages tab in RStudio, or using <code>?tibble</code>. Access the documentation for the <code>tribble</code> function, and try loading the package and creating your own tibble using <code>tribble</code>.</p>
<details>
<summary>
Solution
</summary>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="organization.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="do">## install.packages(&quot;tibble&quot;)</span></span>
<span id="cb123-2"><a href="organization.html#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb123-3"><a href="organization.html#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="do">## ?tibble</span></span>
<span id="cb123-4"><a href="organization.html#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="do">## ?tribble</span></span>
<span id="cb123-5"><a href="organization.html#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tribble</span>(<span class="sc">~</span>var1, <span class="sc">~</span>var2,</span>
<span id="cb123-6"><a href="organization.html#cb123-6" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span>, <span class="dv">2</span>, </span>
<span id="cb123-7"><a href="organization.html#cb123-7" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span>, <span class="dv">4</span>,</span>
<span id="cb123-8"><a href="organization.html#cb123-8" aria-hidden="true" tabindex="-1"></a>        <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb123-9"><a href="organization.html#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 x 2</span></span>
<span id="cb123-10"><a href="organization.html#cb123-10" aria-hidden="true" tabindex="-1"></a>   var1  var2</span>
<span id="cb123-11"><a href="organization.html#cb123-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb123-12"><a href="organization.html#cb123-12" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">2</span></span>
<span id="cb123-13"><a href="organization.html#cb123-13" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb123-14"><a href="organization.html#cb123-14" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">5</span>     <span class="dv">6</span></span></code></pre></div>
</details>
</div>
</div>
<div id="references-and-links-1" class="section level2 learn-more unnumbered">
<h2>References and Links</h2>
<ul>
<li>A more advanced take on functions in R can be found <a href="http://adv-r.had.co.nz/Functions.html">here</a> (Advanced R chapter)</li>
<li>There is also a handy cheat sheet style summary of PROC IML in SAS <a href="https://www.iuj.ac.jp/faculty/kucc625/sas/sas_iml.html">here</a> and some useful demonstrations of simple tasks in IML <a href="https://faculty.tarleton.edu/crawford/documents/Math5364/ProcIMLandMacros.txt">here</a>.</li>
<li>A helpful blog post for scoping in SAS is <a href="https://blogs.sas.com/content/iml/2013/04/29/understanding-local-and-global-variables-in-the-sasiml-language.html">here</a></li>
<li><a href="https://www.educative.io/edpresso/pass-by-value-vs-pass-by-reference">Here is another explanation of pass-by-value vs. pass-by-reference</a> (intended for C programming)</li>
<li><a href="https://scholar.smu.edu/cgi/viewcontent.cgi?article=1021&amp;context=datasciencereview">A comparison of R, SAS, and python</a> - source of information about the SAS package distribution system.</li>
<li><a href="https://psyteachr.github.io/msc-data-skills/tidyr.html#pipes">Another explanation of pipes</a> (lots of examples)</li>
</ul>

</div>
</div>



<div class="footnotes">
<hr />
<ol start="10">
<li id="fn10"><p>It’s a good idea to specify your parameter names when you’re using functions you’re unfamiliar with, which at this point, is probably all of them.<a href="organization.html#fnref10" class="footnote-back">↩︎</a></p></li>
<li id="fn11"><p>if you’re familiar with C, the argument passed in is just a pointer to the original memory<a href="organization.html#fnref11" class="footnote-back">↩︎</a></p></li>
<li id="fn12"><p>I had been using R for ~8 years before I ever heard the term “infix operator” - and I’d been using infix operators for a long time at that point, just without thinking about what they were.<a href="organization.html#fnref12" class="footnote-back">↩︎</a></p></li>
<li id="fn13"><p>Note that the various components of SAS can be <em>extremely</em> confusing to separate. I found <a href="https://www.lexjansen.com/mwsug/2017/RF/MWSUG-2017-RF01.pdf">this</a> guide to be somewhat helpful.<a href="organization.html#fnref13" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro-prog.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reading-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/srvanderplas/unl-stat850/edit/master/03-organization.Rmd",
"text": "Suggest an edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["https://github.com/srvanderplas/unl-stat850/raw/master/03-organization.Rmd"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
